(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function r(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(n){if(n.ep)return;n.ep=!0;const i=r(n);fetch(n.href,i)}})();const ir=!1;var Mt=Array.isArray,vs=Array.prototype.indexOf,Nt=Array.from,hs=Object.defineProperty,Ne=Object.getOwnPropertyDescriptor,ps=Object.getOwnPropertyDescriptors,ms=Object.prototype,_s=Array.prototype,gr=Object.getPrototypeOf,ar=Object.isExtensible;function gs(t){for(var e=0;e<t.length;e++)t[e]()}function Pt(t,e){if(Array.isArray(t))return t;if(!(Symbol.iterator in t))return Array.from(t);const r=[];for(const s of t)if(r.push(s),r.length===e)break;return r}const ae=2,yr=4,pt=8,Dt=16,he=32,Le=64,Lt=128,J=256,ot=512,ee=1024,ve=2048,ze=4096,de=8192,Ut=16384,wr=32768,qt=65536,or=1<<18,ys=1<<19,Sr=1<<20,It=1<<21,Ge=Symbol("$state"),ws=Symbol("legacy props"),Ss=Symbol("");function br(t){return t===this.v}function bs(t,e){return t!=t?e==e:t!==e||t!==null&&typeof t=="object"||typeof t=="function"}function $t(t){return!bs(t,this.v)}function ks(t){throw new Error("https://svelte.dev/e/effect_in_teardown")}function xs(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function Es(t){throw new Error("https://svelte.dev/e/effect_orphan")}function Cs(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function Ps(t){throw new Error("https://svelte.dev/e/props_invalid_value")}function As(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function Ts(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function zs(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}let Is=!1;const Rs=1,Os=2,Ms=16,Ns=1,Ds=4,Ls=8,Us=16,qs=2,W=Symbol(),$s="http://www.w3.org/1999/xhtml";function Bs(t){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}let G=null;function lr(t){G=t}function Bt(t,e=!1,r){var s=G={p:G,c:null,d:!1,e:null,m:!1,s:t,x:null,l:null};Gs(()=>{s.d=!0})}function Ft(t){const e=G;if(e!==null){const l=e.e;if(l!==null){var r=T,s=k;e.e=null;try{for(var n=0;n<l.length;n++){var i=l[n];De(i.effect),xe(i.reaction),Vt(i.fn)}}finally{De(r),xe(s)}}G=e.p,e.m=!0}return{}}function kr(){return!0}function ie(t){if(typeof t!="object"||t===null||Ge in t)return t;const e=gr(t);if(e!==ms&&e!==_s)return t;var r=new Map,s=Mt(t),n=y(0),i=k,l=v=>{var o=k;xe(i);var c=v();return xe(o),c};return s&&r.set("length",y(t.length)),new Proxy(t,{defineProperty(v,o,c){(!("value"in c)||c.configurable===!1||c.enumerable===!1||c.writable===!1)&&As();var f=r.get(o);return f===void 0?f=l(()=>{var d=y(c.value);return r.set(o,d),d}):m(f,c.value,!0),!0},deleteProperty(v,o){var c=r.get(o);if(c===void 0){if(o in v){const u=l(()=>y(W));r.set(o,u),At(n)}}else{if(s&&typeof o=="string"){var f=r.get("length"),d=Number(o);Number.isInteger(d)&&d<f.v&&m(f,d)}m(c,W),At(n)}return!0},get(v,o,c){if(o===Ge)return t;var f=r.get(o),d=o in v;if(f===void 0&&(!d||Ne(v,o)?.writable)&&(f=l(()=>{var h=ie(d?v[o]:W),g=y(h);return g}),r.set(o,f)),f!==void 0){var u=a(f);return u===W?void 0:u}return Reflect.get(v,o,c)},getOwnPropertyDescriptor(v,o){var c=Reflect.getOwnPropertyDescriptor(v,o);if(c&&"value"in c){var f=r.get(o);f&&(c.value=a(f))}else if(c===void 0){var d=r.get(o),u=d?.v;if(d!==void 0&&u!==W)return{enumerable:!0,configurable:!0,value:u,writable:!0}}return c},has(v,o){if(o===Ge)return!0;var c=r.get(o),f=c!==void 0&&c.v!==W||Reflect.has(v,o);if(c!==void 0||T!==null&&(!f||Ne(v,o)?.writable)){c===void 0&&(c=l(()=>{var u=f?ie(v[o]):W,h=y(u);return h}),r.set(o,c));var d=a(c);if(d===W)return!1}return f},set(v,o,c,f){var d=r.get(o),u=o in v;if(s&&o==="length")for(var h=c;h<d.v;h+=1){var g=r.get(h+"");g!==void 0?m(g,W):h in v&&(g=l(()=>y(W)),r.set(h+"",g))}if(d===void 0)(!u||Ne(v,o)?.writable)&&(d=l(()=>y(void 0)),m(d,ie(c)),r.set(o,d));else{u=d.v!==W;var I=l(()=>ie(c));m(d,I)}var E=Reflect.getOwnPropertyDescriptor(v,o);if(E?.set&&E.set.call(f,c),!u){if(s&&typeof o=="string"){var S=r.get("length"),P=Number(o);Number.isInteger(P)&&P>=S.v&&m(S,P+1)}At(n)}return!0},ownKeys(v){a(n);var o=Reflect.ownKeys(v).filter(d=>{var u=r.get(d);return u===void 0||u.v!==W});for(var[c,f]of r)f.v!==W&&!(c in v)&&o.push(c);return o},setPrototypeOf(){Ts()}})}function At(t,e=1){m(t,t.v+e)}function mt(t){var e=ae|ve,r=k!==null&&(k.f&ae)!==0?k:null;return T===null||r!==null&&(r.f&J)!==0?e|=J:T.f|=Sr,{ctx:G,deps:null,effects:null,equals:br,f:e,fn:t,reactions:null,rv:0,v:null,wv:0,parent:r??T}}function F(t){const e=mt(t);return $r(e),e}function Fs(t){const e=mt(t);return e.equals=$t,e}function xr(t){var e=t.effects;if(e!==null){t.effects=null;for(var r=0;r<e.length;r+=1)ke(e[r])}}function Hs(t){for(var e=t.parent;e!==null;){if((e.f&ae)===0)return e;e=e.parent}return null}function Er(t){var e,r=T;De(Hs(t));try{xr(t),e=jr(t)}finally{De(r)}return e}function Cr(t){var e=Er(t);if(t.equals(e)||(t.v=e,t.wv=Fr()),!qe){var r=(be||(t.f&J)!==0)&&t.deps!==null?ze:ee;ue(t,r)}}const Ze=new Map;function Se(t,e){var r={f:0,v:t,reactions:null,equals:br,rv:0,wv:0};return r}function y(t,e){const r=Se(t);return $r(r),r}function Pr(t,e=!1,r=!0){const s=Se(t);return e||(s.equals=$t),s}function m(t,e,r=!1){k!==null&&(!le||(k.f&or)!==0)&&kr()&&(k.f&(ae|Dt|or))!==0&&!(X?.[1].includes(t)&&X[0]===k)&&zs();let s=r?ie(e):e;return Ar(t,s)}function Ar(t,e){if(!t.equals(e)){var r=t.v;qe?Ze.set(t,e):Ze.set(t,r),t.v=e,(t.f&ae)!==0&&((t.f&ve)!==0&&Er(t),ue(t,(t.f&J)===0?ee:ze)),t.wv=Fr(),Tr(t,ve),T!==null&&(T.f&ee)!==0&&(T.f&(he|Le))===0&&(Q===null?nn([t]):Q.push(t))}return e}function Tr(t,e){var r=t.reactions;if(r!==null)for(var s=r.length,n=0;n<s;n++){var i=r[n],l=i.f;(l&ve)===0&&(ue(i,e),(l&(ee|J))!==0&&((l&ae)!==0?Tr(i,ze):Jt(i)))}}let js=!1;var ur,zr,Ir,Rr;function Vs(){if(ur===void 0){ur=window,zr=/Firefox/.test(navigator.userAgent);var t=Element.prototype,e=Node.prototype,r=Text.prototype;Ir=Ne(e,"firstChild").get,Rr=Ne(e,"nextSibling").get,ar(t)&&(t.__click=void 0,t.__className=void 0,t.__attributes=null,t.__style=void 0,t.__e=void 0),ar(r)&&(r.__t=void 0)}}function Or(t=""){return document.createTextNode(t)}function Ht(t){return Ir.call(t)}function _t(t){return Rr.call(t)}function p(t,e){return Ht(t)}function Ws(t,e){{var r=Ht(t);return r instanceof Comment&&r.data===""?_t(r):r}}function _(t,e=1,r=!1){let s=t;for(;e--;)s=_t(s);return s}function Ks(t){t.textContent=""}function Ys(t){T===null&&k===null&&Es(),k!==null&&(k.f&J)!==0&&T===null&&xs(),qe&&ks()}function Js(t,e){var r=e.last;r===null?e.last=e.first=t:(r.next=t,t.prev=r,e.last=t)}function Ue(t,e,r,s=!0){var n=T,i={ctx:G,deps:null,nodes_start:null,nodes_end:null,f:t|ve,first:null,fn:e,last:null,next:null,parent:n,prev:null,teardown:null,transitions:null,wv:0};if(r)try{Yt(i),i.f|=wr}catch(o){throw ke(i),o}else e!==null&&Jt(i);var l=r&&i.deps===null&&i.first===null&&i.nodes_start===null&&i.teardown===null&&(i.f&(Sr|Lt))===0;if(!l&&s&&(n!==null&&Js(i,n),k!==null&&(k.f&ae)!==0)){var v=k;(v.effects??=[]).push(i)}return i}function Gs(t){const e=Ue(pt,null,!1);return ue(e,ee),e.teardown=t,e}function jt(t){Ys();var e=T!==null&&(T.f&he)!==0&&G!==null&&!G.m;if(e){var r=G;(r.e??=[]).push({fn:t,effect:T,reaction:k})}else{var s=Vt(t);return s}}function Zs(t){const e=Ue(Le,t,!0);return(r={})=>new Promise(s=>{r.outro?lt(e,()=>{ke(e),s(void 0)}):(ke(e),s(void 0))})}function Vt(t){return Ue(yr,t,!1)}function Qs(t){return Ue(pt,t,!0)}function K(t,e=[],r=mt){const s=e.map(r);return Wt(()=>t(...s.map(a)))}function Wt(t,e=0){return Ue(pt|Dt|e,t,!0)}function Qe(t,e=!0){return Ue(pt|he,t,!0,e)}function Mr(t){var e=t.teardown;if(e!==null){const r=qe,s=k;cr(!0),xe(null);try{e.call(null)}finally{cr(r),xe(s)}}}function Nr(t,e=!1){var r=t.first;for(t.first=t.last=null;r!==null;){var s=r.next;(r.f&Le)!==0?r.parent=null:ke(r,e),r=s}}function Xs(t){for(var e=t.first;e!==null;){var r=e.next;(e.f&he)===0&&ke(e),e=r}}function ke(t,e=!0){var r=!1;(e||(t.f&ys)!==0)&&t.nodes_start!==null&&t.nodes_end!==null&&(en(t.nodes_start,t.nodes_end),r=!0),Nr(t,e&&!r),vt(t,0),ue(t,Ut);var s=t.transitions;if(s!==null)for(const i of s)i.stop();Mr(t);var n=t.parent;n!==null&&n.first!==null&&Dr(t),t.next=t.prev=t.teardown=t.ctx=t.deps=t.fn=t.nodes_start=t.nodes_end=null}function en(t,e){for(;t!==null;){var r=t===e?null:_t(t);t.remove(),t=r}}function Dr(t){var e=t.parent,r=t.prev,s=t.next;r!==null&&(r.next=s),s!==null&&(s.prev=r),e!==null&&(e.first===t&&(e.first=s),e.last===t&&(e.last=r))}function lt(t,e){var r=[];Kt(t,r,!0),Lr(r,()=>{ke(t),e&&e()})}function Lr(t,e){var r=t.length;if(r>0){var s=()=>--r||e();for(var n of t)n.out(s)}else e()}function Kt(t,e,r){if((t.f&de)===0){if(t.f^=de,t.transitions!==null)for(const l of t.transitions)(l.is_global||r)&&e.push(l);for(var s=t.first;s!==null;){var n=s.next,i=(s.f&qt)!==0||(s.f&he)!==0;Kt(s,e,i?r:!1),s=n}}}function ut(t){Ur(t,!0)}function Ur(t,e){if((t.f&de)!==0){t.f^=de;for(var r=t.first;r!==null;){var s=r.next,n=(r.f&qt)!==0||(r.f&he)!==0;Ur(r,n?e:!1),r=s}if(t.transitions!==null)for(const i of t.transitions)(i.is_global||e)&&i.in()}}let ct=[];function tn(){var t=ct;ct=[],gs(t)}function rn(t){ct.length===0&&queueMicrotask(tn),ct.push(t)}function sn(t){var e=T;if((e.f&wr)===0){if((e.f&Lt)===0)throw t;e.fn(t)}else qr(t,e)}function qr(t,e){for(;e!==null;){if((e.f&Lt)!==0)try{e.fn(t);return}catch{}e=e.parent}throw t}let Rt=!1,ft=null,Te=!1,qe=!1;function cr(t){qe=t}let at=[];let k=null,le=!1;function xe(t){k=t}let T=null;function De(t){T=t}let X=null;function $r(t){k!==null&&k.f&It&&(X===null?X=[k,[t]]:X[1].push(t))}let H=null,Y=0,Q=null;function nn(t){Q=t}let Br=1,dt=0,be=!1;function Fr(){return++Br}function gt(t){var e=t.f;if((e&ve)!==0)return!0;if((e&ze)!==0){var r=t.deps,s=(e&J)!==0;if(r!==null){var n,i,l=(e&ot)!==0,v=s&&T!==null&&!be,o=r.length;if(l||v){var c=t,f=c.parent;for(n=0;n<o;n++)i=r[n],(l||!i?.reactions?.includes(c))&&(i.reactions??=[]).push(c);l&&(c.f^=ot),v&&f!==null&&(f.f&J)===0&&(c.f^=J)}for(n=0;n<o;n++)if(i=r[n],gt(i)&&Cr(i),i.wv>t.wv)return!0}(!s||T!==null&&!be)&&ue(t,ee)}return!1}function Hr(t,e,r=!0){var s=t.reactions;if(s!==null)for(var n=0;n<s.length;n++){var i=s[n];X?.[1].includes(t)&&X[0]===k||((i.f&ae)!==0?Hr(i,e,!1):e===i&&(r?ue(i,ve):(i.f&ee)!==0&&ue(i,ze),Jt(i)))}}function jr(t){var e=H,r=Y,s=Q,n=k,i=be,l=X,v=G,o=le,c=t.f;H=null,Y=0,Q=null,be=(c&J)!==0&&(le||!Te||k===null),k=(c&(he|Le))===0?t:null,X=null,lr(t.ctx),le=!1,dt++,t.f|=It;try{var f=(0,t.fn)(),d=t.deps;if(H!==null){var u;if(vt(t,Y),d!==null&&Y>0)for(d.length=Y+H.length,u=0;u<H.length;u++)d[Y+u]=H[u];else t.deps=d=H;if(!be)for(u=Y;u<d.length;u++)(d[u].reactions??=[]).push(t)}else d!==null&&Y<d.length&&(vt(t,Y),d.length=Y);if(kr()&&Q!==null&&!le&&d!==null&&(t.f&(ae|ze|ve))===0)for(u=0;u<Q.length;u++)Hr(Q[u],t);return n!==null&&n!==t&&(dt++,Q!==null&&(s===null?s=Q:s.push(...Q))),f}catch(h){sn(h)}finally{H=e,Y=r,Q=s,k=n,be=i,X=l,lr(v),le=o,t.f^=It}}function an(t,e){let r=e.reactions;if(r!==null){var s=vs.call(r,t);if(s!==-1){var n=r.length-1;n===0?r=e.reactions=null:(r[s]=r[n],r.pop())}}r===null&&(e.f&ae)!==0&&(H===null||!H.includes(e))&&(ue(e,ze),(e.f&(J|ot))===0&&(e.f^=ot),xr(e),vt(e,0))}function vt(t,e){var r=t.deps;if(r!==null)for(var s=e;s<r.length;s++)an(t,r[s])}function Yt(t){var e=t.f;if((e&Ut)===0){ue(t,ee);var r=T,s=Te;T=t,Te=!0;try{(e&Dt)!==0?Xs(t):Nr(t),Mr(t);var n=jr(t);t.teardown=typeof n=="function"?n:null,t.wv=Br;var i;ir&&Is&&(t.f&ve)!==0&&t.deps}finally{Te=s,T=r}}}function on(){try{Cs()}catch(t){if(ft!==null)qr(t,ft);else throw t}}function ln(){var t=Te;try{var e=0;for(Te=!0;at.length>0;){e++>1e3&&on();var r=at,s=r.length;at=[];for(var n=0;n<s;n++){var i=cn(r[n]);un(i)}Ze.clear()}}finally{Rt=!1,Te=t,ft=null}}function un(t){var e=t.length;if(e!==0)for(var r=0;r<e;r++){var s=t[r];(s.f&(Ut|de))===0&&gt(s)&&(Yt(s),s.deps===null&&s.first===null&&s.nodes_start===null&&(s.teardown===null?Dr(s):s.fn=null))}}function Jt(t){Rt||(Rt=!0,queueMicrotask(ln));for(var e=ft=t;e.parent!==null;){e=e.parent;var r=e.f;if((r&(Le|he))!==0){if((r&ee)===0)return;e.f^=ee}}at.push(e)}function cn(t){for(var e=[],r=t;r!==null;){var s=r.f,n=(s&(he|Le))!==0,i=n&&(s&ee)!==0;if(!i&&(s&de)===0){(s&yr)!==0?e.push(r):n?r.f^=ee:gt(r)&&Yt(r);var l=r.first;if(l!==null){r=l;continue}}var v=r.parent;for(r=r.next;r===null&&v!==null;)r=v.next,v=v.parent}return e}function a(t){var e=t.f,r=(e&ae)!==0;if(k!==null&&!le){if(!X?.[1].includes(t)||X[0]!==k){var s=k.deps;t.rv<dt&&(t.rv=dt,H===null&&s!==null&&s[Y]===t?Y++:H===null?H=[t]:(!be||!H.includes(t))&&H.push(t))}}else if(r&&t.deps===null&&t.effects===null){var n=t,i=n.parent;i!==null&&(i.f&J)===0&&(n.f^=J)}return r&&(n=t,gt(n)&&Cr(n)),qe&&Ze.has(t)?Ze.get(t):t.v}function ht(t){var e=le;try{return le=!0,t()}finally{le=e}}const fn=-7169;function ue(t,e){t.f=t.f&fn|e}const dn=["touchstart","touchmove"];function vn(t){return dn.includes(t)}const Vr=new Set,Ot=new Set;function hn(t){for(var e=0;e<t.length;e++)Vr.add(t[e]);for(var r of Ot)r(t)}function st(t){var e=this,r=e.ownerDocument,s=t.type,n=t.composedPath?.()||[],i=n[0]||t.target,l=0,v=t.__root;if(v){var o=n.indexOf(v);if(o!==-1&&(e===document||e===window)){t.__root=e;return}var c=n.indexOf(e);if(c===-1)return;o<=c&&(l=o)}if(i=n[l]||t.target,i!==e){hs(t,"currentTarget",{configurable:!0,get(){return i||r}});var f=k,d=T;xe(null),De(null);try{for(var u,h=[];i!==null;){var g=i.assignedSlot||i.parentNode||i.host||null;try{var I=i["__"+s];if(I!=null&&(!i.disabled||t.target===i))if(Mt(I)){var[E,...S]=I;E.apply(i,[t,...S])}else I.call(i,t)}catch(P){u?h.push(P):u=P}if(t.cancelBubble||g===e||g===null)break;i=g}if(u){for(let P of h)queueMicrotask(()=>{throw P});throw u}}finally{t.__root=e,delete t.currentTarget,xe(f),De(d)}}}function pn(t){var e=document.createElement("template");return e.innerHTML=t.replaceAll("<!>","<!---->"),e.content}function Wr(t,e){var r=T;r.nodes_start===null&&(r.nodes_start=t,r.nodes_end=e)}function N(t,e){var r=(e&qs)!==0,s,n=!t.startsWith("<!>");return()=>{s===void 0&&(s=pn(n?t:"<!>"+t),s=Ht(s));var i=r||zr?document.importNode(s,!0):s.cloneNode(!0);return Wr(i,i),i}}function mn(){var t=document.createDocumentFragment(),e=document.createComment(""),r=Or();return t.append(e,r),Wr(e,r),t}function M(t,e){t!==null&&t.before(e)}function x(t,e){var r=e==null?"":typeof e=="object"?e+"":e;r!==(t.__t??=t.nodeValue)&&(t.__t=r,t.nodeValue=r+"")}function _n(t,e){return gn(t,e)}const Me=new Map;function gn(t,{target:e,anchor:r,props:s={},events:n,context:i,intro:l=!0}){Vs();var v=new Set,o=d=>{for(var u=0;u<d.length;u++){var h=d[u];if(!v.has(h)){v.add(h);var g=vn(h);e.addEventListener(h,st,{passive:g});var I=Me.get(h);I===void 0?(document.addEventListener(h,st,{passive:g}),Me.set(h,1)):Me.set(h,I+1)}}};o(Nt(Vr)),Ot.add(o);var c=void 0,f=Zs(()=>{var d=r??e.appendChild(Or());return Qe(()=>{if(i){Bt({});var u=G;u.c=i}n&&(s.$$events=n),c=t(d,s)||{},i&&Ft()}),()=>{for(var u of v){e.removeEventListener(u,st);var h=Me.get(u);--h===0?(document.removeEventListener(u,st),Me.delete(u)):Me.set(u,h)}Ot.delete(o),d!==r&&d.parentNode?.removeChild(d)}});return yn.set(c,f),c}let yn=new WeakMap;function Z(t,e,[r,s]=[0,0]){var n=t,i=null,l=null,v=W,o=r>0?qt:0,c=!1;const f=(u,h=!0)=>{c=!0,d(h,u)},d=(u,h)=>{v!==(v=u)&&(v?(i?ut(i):h&&(i=Qe(()=>h(n))),l&&lt(l,()=>{l=null})):(l?ut(l):h&&(l=Qe(()=>h(n,[r+1,s]))),i&&lt(i,()=>{i=null})))};Wt(()=>{c=!1,e(f),c||d(null,null)},o)}function Ke(t,e){return e}function wn(t,e,r,s){for(var n=[],i=e.length,l=0;l<i;l++)Kt(e[l].e,n,!0);var v=i>0&&n.length===0&&r!==null;if(v){var o=r.parentNode;Ks(o),o.append(r),s.clear(),we(t,e[0].prev,e[i-1].next)}Lr(n,()=>{for(var c=0;c<i;c++){var f=e[c];v||(s.delete(f.k),we(t,f.prev,f.next)),ke(f.e,!v)}})}function Ye(t,e,r,s,n,i=null){var l=t,v={flags:e,items:new Map,first:null},o=null,c=!1,f=Fs(()=>{var d=r();return Mt(d)?d:d==null?[]:Nt(d)});Wt(()=>{var d=a(f),u=d.length;c&&u===0||(c=u===0,Sn(d,v,l,n,e,s,r),i!==null&&(u===0?o?ut(o):o=Qe(()=>i(l)):o!==null&&lt(o,()=>{o=null})),a(f))})}function Sn(t,e,r,s,n,i,l){var v=t.length,o=e.items,c=e.first,f=c,d,u=null,h=[],g=[],I,E,S,P;for(P=0;P<v;P+=1){if(I=t[P],E=i(I,P),S=o.get(E),S===void 0){var U=f?f.e.nodes_start:r;u=kn(U,e,u,u===null?e.first:u.next,I,E,P,s,n,l),o.set(E,u),h=[],g=[],f=u.next;continue}if(bn(S,I,P),(S.e.f&de)!==0&&ut(S.e),S!==f){if(d!==void 0&&d.has(S)){if(h.length<g.length){var O=g[0],C;u=O.prev;var q=h[0],j=h[h.length-1];for(C=0;C<h.length;C+=1)fr(h[C],O,r);for(C=0;C<g.length;C+=1)d.delete(g[C]);we(e,q.prev,j.next),we(e,u,q),we(e,j,O),f=O,u=j,P-=1,h=[],g=[]}else d.delete(S),fr(S,f,r),we(e,S.prev,S.next),we(e,S,u===null?e.first:u.next),we(e,u,S),u=S;continue}for(h=[],g=[];f!==null&&f.k!==E;)(f.e.f&de)===0&&(d??=new Set).add(f),g.push(f),f=f.next;if(f===null)continue;S=f}h.push(S),u=S,f=S.next}if(f!==null||d!==void 0){for(var ce=d===void 0?[]:Nt(d);f!==null;)(f.e.f&de)===0&&ce.push(f),f=f.next;var $e=ce.length;if($e>0){var z=null;wn(e,ce,z,o)}}T.first=e.first&&e.first.e,T.last=u&&u.e}function bn(t,e,r,s){Ar(t.v,e),t.i=r}function kn(t,e,r,s,n,i,l,v,o,c){var f=(o&Rs)!==0,d=(o&Ms)===0,u=f?d?Pr(n,!1,!1):Se(n):n,h=(o&Os)===0?l:Se(l),g={i:h,v:u,k:i,a:null,e:null,prev:r,next:s};try{return g.e=Qe(()=>v(t,u,h,c),js),g.e.prev=r&&r.e,g.e.next=s&&s.e,r===null?e.first=g:(r.next=g,r.e.next=g.e),s!==null&&(s.prev=g,s.e.prev=g.e),g}finally{}}function fr(t,e,r){for(var s=t.next?t.next.e.nodes_start:r,n=e?e.e.nodes_start:r,i=t.e.nodes_start;i!==s;){var l=_t(i);n.before(i),i=l}}function we(t,e,r){e===null?t.first=r:(e.next=r,e.e.next=r&&r.e),r!==null&&(r.prev=e,r.e.prev=e&&e.e)}function xn(t,e,r){var s=t==null?"":""+t;return s=s?s+" "+e:e,s===""?null:s}function En(t,e){return t==null?null:String(t)}function nt(t,e,r,s,n,i){var l=t.__className;if(l!==r||l===void 0){var v=xn(r,s);v==null?t.removeAttribute("class"):t.className=v,t.__className=r}return i}function Cn(t,e,r,s){var n=t.__style;if(n!==e){var i=En(e);i==null?t.removeAttribute("style"):t.style.cssText=i,t.__style=e}return s}const Pn=Symbol("is custom element"),An=Symbol("is html");function Tn(t,e){var r=Kr(t);r.value===(r.value=e??void 0)||t.value===e&&(e!==0||t.nodeName!=="PROGRESS")||(t.value=e??"")}function dr(t,e,r,s){var n=Kr(t);n[e]!==(n[e]=r)&&(e==="loading"&&(t[Ss]=r),r==null?t.removeAttribute(e):typeof r!="string"&&zn(t).includes(e)?t[e]=r:t.setAttribute(e,r))}function Kr(t){return t.__attributes??={[Pn]:t.nodeName.includes("-"),[An]:t.namespaceURI===$s}}var vr=new Map;function zn(t){var e=vr.get(t.nodeName);if(e)return e;vr.set(t.nodeName,e=[]);for(var r,s=t,n=Element.prototype;n!==s;){r=ps(s);for(var i in r)r[i].set&&e.push(i);s=gr(s)}return e}function hr(t,e){return t===e||t?.[Ge]===e}function In(t={},e,r,s){return Vt(()=>{var n,i;return Qs(()=>{n=i,i=[],ht(()=>{t!==r(...i)&&(e(t,...i),n&&hr(r(...n),t)&&e(null,...n))})}),()=>{rn(()=>{i&&hr(r(...i),t)&&e(null,...i)})}}),t}let it=!1;function Rn(t){var e=it;try{return it=!1,[t(),it]}finally{it=e}}function pr(t){return t.ctx?.d??!1}function fe(t,e,r,s){var n=(r&Ns)!==0,i=!0,l=(r&Ls)!==0,v=(r&Us)!==0,o=!1,c;l?[c,o]=Rn(()=>t[e]):c=t[e];var f=Ge in t||ws in t,d=l&&(Ne(t,e)?.set??(f&&e in t&&(C=>t[e]=C)))||void 0,u=s,h=!0,g=!1,I=()=>(g=!0,h&&(h=!1,v?u=ht(s):u=s),u);c===void 0&&s!==void 0&&(d&&i&&Ps(),c=I(),d&&d(c));var E;if(E=()=>{var C=t[e];return C===void 0?I():(h=!0,g=!1,C)},(r&Ds)===0&&i)return E;if(d){var S=t.$$legacy;return function(C,q){return arguments.length>0?((!q||S||o)&&d(q?E():C),C):E()}}var P=!1,U=Pr(c),O=mt(()=>{var C=E(),q=a(U);return P?(P=!1,q):U.v=C});return l&&a(O),n||(O.equals=$t),function(C,q){if(arguments.length>0){const j=q?a(O):l?ie(C):C;if(!O.equals(j)){if(P=!0,m(U,j),g&&u!==void 0&&(u=j),pr(O))return C;ht(()=>a(O))}return C}return pr(O)?O.v:a(O)}}function Yr(t){G===null&&Bs(),jt(()=>{const e=ht(t);if(typeof e=="function")return e})}const On="5";typeof window<"u"&&((window.__svelte??={}).v??=new Set).add(On);function Je(t){m(t,t.v+1)}class Gt extends Map{#e=new Map;#t=y(0);#r=y(0);constructor(e){if(super(),e){for(var[r,s]of e)super.set(r,s);this.#r.v=super.size}}has(e){var r=this.#e,s=r.get(e);if(s===void 0){var n=super.get(e);if(n!==void 0)s=Se(0),r.set(e,s);else return a(this.#t),!1}return a(s),!0}forEach(e,r){this.#s(),super.forEach(e,r)}get(e){var r=this.#e,s=r.get(e);if(s===void 0){var n=super.get(e);if(n!==void 0)s=Se(0),r.set(e,s);else{a(this.#t);return}}return a(s),super.get(e)}set(e,r){var s=this.#e,n=s.get(e),i=super.get(e),l=super.set(e,r),v=this.#t;if(n===void 0)n=Se(0),s.set(e,n),m(this.#r,super.size),Je(v);else if(i!==r){Je(n);var o=v.reactions===null?null:new Set(v.reactions),c=o===null||!n.reactions?.every(f=>o.has(f));c&&Je(v)}return l}delete(e){var r=this.#e,s=r.get(e),n=super.delete(e);return s!==void 0&&(r.delete(e),m(this.#r,super.size),m(s,-1),Je(this.#t)),n}clear(){if(super.size!==0){super.clear();var e=this.#e;m(this.#r,0);for(var r of e.values())m(r,-1);Je(this.#t),e.clear()}}#s(){a(this.#t);var e=this.#e;if(this.#r.v!==e.size){for(var r of super.keys())if(!e.has(r)){var s=Se(0);e.set(r,s)}}for([,s]of this.#e)a(s)}keys(){return a(this.#t),super.keys()}values(){return this.#s(),super.values()}entries(){return this.#s(),super.entries()}[Symbol.iterator](){return this.entries()}get size(){return a(this.#r),super.size}}class Zt{#e=y("");get id(){return a(this.#e)}set id(e){m(this.#e,e,!0)}#t=y("");get type(){return a(this.#t)}set type(e){m(this.#t,e,!0)}#r=y(ie(new Date));get lastUpdated(){return a(this.#r)}set lastUpdated(e){m(this.#r,e,!0)}constructor(e,r){this.id=e,this.type=r}updateProperty(e,r){if(e.length!==0)if(e.length===1){const[s]=e;s in this&&(this[s]=r,this.lastUpdated=new Date)}else{const[s,...n]=e,i=this[s];if(i&&typeof i=="object")if("updateProperty"in i)i.updateProperty(n,r);else if(i instanceof Map||i instanceof Gt){const[l,...v]=n,o=i.get(l);o&&"updateProperty"in o&&o.updateProperty(v,r)}else this.updateNestedObject(i,n,r)}}updateNestedObject(e,r,s){if(r.length===1)e[r[0]]=s;else{const[n,...i]=r;e[n]||(e[n]={}),this.updateNestedObject(e[n],i,s)}}}class Tt{items=new Gt;entityFactory;constructor(e){this.entityFactory=e}get(e){return this.items.get(e)}set(e,r){this.items.set(e,r)}has(e){return this.items.has(e)}delete(e){return this.items.delete(e)}clear(){this.items.clear()}get size(){return this.items.size}keys(){return this.items.keys()}values(){return this.items.values()}entries(){return this.items.entries()}[Symbol.iterator](){return this.items.entries()}updateItem(e,r){let s=this.items.get(e);return s?s.update(r):(s=this.entityFactory(e,r),this.items.set(e,s)),s}updateItemProperty(e,r,s){let n=this.items.get(e);return n||(n=this.entityFactory(e,{}),this.items.set(e,n)),n.updateProperty(r,s),n}toObject(){const e={};for(const[r,s]of this.items)e[r]=s.toObject();return e}}class Mn{#e=y(ie([]));get items(){return a(this.#e)}set items(e){m(this.#e,e,!0)}get length(){return this.items.length}push(e){this.items.push(e)}unshift(e){this.items.unshift(e)}splice(e,r){return this.items.splice(e,r)}filter(e){return this.items.filter(e)}map(e){return this.items.map(e)}find(e){return this.items.find(e)}findIndex(e){return this.items.findIndex(e)}get array(){return this.items}[Symbol.iterator](){return this.items[Symbol.iterator]()}}class Nn extends Zt{#e=y(0);get value(){return a(this.#e)}set value(e){m(this.#e,e,!0)}#t=y("");get unit(){return a(this.#t)}set unit(e){m(this.#t,e,!0)}#r=y("normal");get status(){return a(this.#r)}set status(e){m(this.#r,e,!0)}updateListeners=new Set;constructor(e,r){super(e,"sensor"),r&&this.update(r)}update(e){e.value!==void 0&&(this.value=e.value),e.unit!==void 0&&(this.unit=e.unit),e.status!==void 0&&(this.status=e.status),this.lastUpdated=new Date,this.notifyUpdateListeners()}updateProperty(e,r){super.updateProperty(e,r),this.lastUpdated=new Date,this.notifyUpdateListeners()}get isHealthy(){return this.status==="normal"}get formattedValue(){return`${this.value} ${this.unit}`}get timeSinceUpdate(){const r=new Date().getTime()-this.lastUpdated.getTime();return`${Math.floor(r/1e3)}s ago`}calibrate(){console.log(`Calibrating sensor ${this.id}`)}reset(){this.value=0,this.status="normal",this.lastUpdated=new Date,this.notifyUpdateListeners()}subscribe(e){return this.updateListeners.add(e),()=>{this.updateListeners.delete(e)}}notifyUpdateListeners(){for(const e of this.updateListeners)e(this)}toObject(){return{id:this.id,type:this.type,value:this.value,unit:this.unit,status:this.status,lastUpdated:this.lastUpdated}}}class Jr extends Zt{#e=y("stopped");get status(){return a(this.#e)}set status(e){m(this.#e,e,!0)}#t=y(ie({}));get properties(){return a(this.#t)}set properties(e){m(this.#t,e,!0)}#r=y(null);get lastCommand(){return a(this.#r)}set lastCommand(e){m(this.#r,e,!0)}#s=y(ie([]));get commandHistory(){return a(this.#s)}set commandHistory(e){m(this.#s,e,!0)}constructor(e,r,s){super(e,r),s&&this.update(s)}update(e){e.status!==void 0&&(this.status=e.status),e.properties&&Object.assign(this.properties,e.properties),this.lastUpdated=new Date}updateProperty(e,r){e.length===1&&e[0]==="properties"?Object.assign(this.properties,r):e.length===2&&e[0]==="properties"?this.properties[e[1]]=r:super.updateProperty(e,r)}get isRunning(){return this.status==="running"}get canStart(){return this.status==="stopped"}get canStop(){return this.status==="running"}start(){return this.canStart?(this.status="running",this.addToHistory("start"),!0):!1}stop(){return this.canStop?(this.status="stopped",this.addToHistory("stop"),!0):!1}toggle(){return this.isRunning?this.stop():this.start()}addToHistory(e){this.lastCommand=e,this.commandHistory.push({command:e,timestamp:new Date}),this.commandHistory.length>10&&this.commandHistory.shift()}toObject(){return{id:this.id,type:this.type,status:this.status,properties:{...this.properties},lastCommand:this.lastCommand,commandHistory:this.commandHistory.map(e=>({command:e.command,timestamp:e.timestamp.toISOString()})),lastUpdated:this.lastUpdated}}}class Gr extends Jr{#e=y(0);get speed(){return a(this.#e)}set speed(e){m(this.#e,e,!0)}#t=y(2e3);get maxSpeed(){return a(this.#t)}set maxSpeed(e){m(this.#t,e,!0)}#r=y(500);get minSpeed(){return a(this.#r)}set minSpeed(e){m(this.#r,e,!0)}constructor(e,r){super(e,"pump"),r?.speed!==void 0&&(this.speed=r.speed),r?.maxSpeed!==void 0&&(this.maxSpeed=r.maxSpeed),r?.minSpeed!==void 0&&(this.minSpeed=r.minSpeed),r&&super.update(r)}update(e){super.update(e),e.speed!==void 0&&(this.speed=e.speed),e.maxSpeed!==void 0&&(this.maxSpeed=e.maxSpeed),e.minSpeed!==void 0&&(this.minSpeed=e.minSpeed)}get speedPercentage(){return(this.speed-this.minSpeed)/(this.maxSpeed-this.minSpeed)*100}setSpeed(e){const r=Math.max(this.minSpeed,Math.min(this.maxSpeed,e));return this.speed=r,this.updateProperty(["speed"],r),this.addToHistory(`set_speed_${r}`),r}toObject(){return{...super.toObject(),speed:this.speed,maxSpeed:this.maxSpeed,minSpeed:this.minSpeed,speedPercentage:this.speedPercentage}}}class mr extends Zt{#e=y("");get message(){return a(this.#e)}set message(e){m(this.#e,e,!0)}#t=y("");get timestamp(){return a(this.#t)}set timestamp(e){m(this.#t,e,!0)}#r=y("info");get severity(){return a(this.#r)}set severity(e){m(this.#r,e,!0)}constructor(e,r="info"){super(Math.random().toString(36).substr(2,9),"alert"),this.message=e,this.severity=r,this.timestamp=new Date().toISOString()}update(e){e.message!==void 0&&(this.message=e.message),e.severity!==void 0&&(this.severity=e.severity),e.timestamp!==void 0&&(this.timestamp=e.timestamp),this.lastUpdated=new Date}get timeAgo(){const e=new Date,r=new Date(this.timestamp),s=e.getTime()-r.getTime(),n=Math.floor(s/6e4);if(n<1)return"Just now";if(n<60)return`${n}m ago`;const i=Math.floor(n/60);return i<24?`${i}h ago`:`${Math.floor(i/24)}d ago`}toObject(){return{id:this.id,type:this.type,message:this.message,severity:this.severity,timestamp:this.timestamp,timeAgo:this.timeAgo,lastUpdated:this.lastUpdated}}}const Dn=(t,e)=>new Nn(t,e),Ln=(t,e)=>t.includes("pump")?new Gr(t,e):new Jr(t,"generic",e);class Un{sensors=new Tt(Dn);equipment=new Tt(Ln);alerts=new Mn;collections=new Map;#e=y("");get version(){return a(this.#e)}set version(e){m(this.#e,e,!0)}#t=y(!1);get isConnected(){return a(this.#t)}set isConnected(e){m(this.#t,e,!0)}#r=y(ie(new Date));get lastUpdate(){return a(this.#r)}set lastUpdate(e){m(this.#r,e,!0)}constructor(){this.collections.set("sensors",this.sensors),this.collections.set("equipment",this.equipment)}registerCollection(e,r){const s=new Tt(r);return this.collections.set(e,s),this[e]=s,s}applyJsonPatch(e){const r=Array.isArray(e)?e:[e];for(const s of r)this.applySinglePatch(s);this.lastUpdate=new Date}applySinglePatch(e){const{op:r,path:s,value:n}=e,i=s.split("/").filter(f=>f);if(i.length===0)return;const[l,v,...o]=i;if(l==="version"){r==="replace"&&(this.version=n);return}if(l==="alerts"){this.handleAlertPatch(r,v,o,n);return}const c=this.collections.get(l);c?this.handleCollectionPatch(c,r,v,o,n):console.warn(`Unknown collection: ${l}`)}handleCollectionPatch(e,r,s,n,i){r==="add"||r==="replace"?n.length===0?e.updateItem(s,i):e.updateItemProperty(s,n,i):r==="remove"&&e.delete(s)}handleAlertPatch(e,r,s,n){if(e==="add"){const i=new mr(n.message,n.severity||"info");this.alerts.unshift(i),this.alerts.length>50&&this.alerts.splice(50)}else if(e==="remove"){const i=parseInt(r);!isNaN(i)&&i<this.alerts.length&&this.alerts.splice(i,1)}}get criticalAlerts(){return this.alerts.filter(e=>e.severity==="error")}get activeSensors(){return Array.from(this.sensors.values()).filter(e=>e.isHealthy)}get runningEquipment(){return Array.from(this.equipment.values()).filter(e=>e.isRunning)}getSensor(e){return this.sensors.get(e)}getEquipment(e){return this.equipment.get(e)}getPump(e){const r=this.equipment.get(e);return r instanceof Gr?r:null}getCollection(e){return this.collections.get(e)}addAlert(e,r="info"){const s=new mr(e,r);this.alerts.unshift(s),this.alerts.length>50&&this.alerts.splice(50)}clearAlert(e){const r=this.alerts.findIndex(s=>s.id===e);r>=0&&this.alerts.splice(r,1)}toObject(){const e={version:this.version,isConnected:this.isConnected,lastUpdate:this.lastUpdate,alerts:this.alerts.map(r=>r.toObject())};for(const[r,s]of this.collections)e[r]=s.toObject();return e}}const qn={};class $n{labState;ws=null;clientId=null;reconnectAttempts=0;maxReconnectAttempts=5;#e=y("disconnected");get connectionStatus(){return a(this.#e)}set connectionStatus(e){m(this.#e,e,!0)}#t=y(null);get lastMessageTime(){return a(this.#t)}set lastMessageTime(e){m(this.#t,e,!0)}constructor(e){this.labState=e}generateClientId(){return"client_"+Math.random().toString(36).substr(2,9)}getBackendHttpBase(){const e=qn?.VITE_BACKEND_URL;if(e)return e.replace(/\/$/,"");const{protocol:r,hostname:s,port:n}=window.location;return n==="5173"||n==="4173"||n==="5174"?"http://localhost:8000":`${r}//${s}${n?`:${n}`:""}`}getWebSocketUrl(){const e=this.getBackendHttpBase(),r=new URL(e);return`${r.protocol==="https:"?"wss:":"ws:"}//${r.host}/ws/${this.clientId}`}connect(){this.clientId||(this.clientId=this.generateClientId());const e=this.getWebSocketUrl();this.ws=new WebSocket(e),this.ws.onopen=()=>{console.log("Connected to WebSocket"),this.connectionStatus="connected",this.labState.isConnected=!0,this.reconnectAttempts=0},this.ws.onmessage=r=>{const s=JSON.parse(r.data);if(this.lastMessageTime=new Date,s.type==="initial_state")this.handleInitialState(s.data),console.log("Received initial state:",s.data);else if(s.type==="patch")try{this.labState.applyJsonPatch(s.patch)}catch(n){console.error("Error applying patch:",n),this.labState.addAlert("Failed to apply state update","error")}},this.ws.onclose=()=>{console.log("WebSocket disconnected"),this.connectionStatus="disconnected",this.labState.isConnected=!1,this.reconnectAttempts<this.maxReconnectAttempts?(this.reconnectAttempts++,console.log(`Reconnecting... (${this.reconnectAttempts}/${this.maxReconnectAttempts})`),setTimeout(()=>{this.connect()},2e3*this.reconnectAttempts)):this.labState.addAlert("Connection lost - max reconnect attempts reached","error")},this.ws.onerror=r=>{console.error("WebSocket error:",r),this.connectionStatus="error",this.labState.addAlert("WebSocket connection error","error")}}handleInitialState(e){if(console.log("handleInitialState called with:",e),this.labState.sensors.clear(),this.labState.equipment.clear(),this.labState.alerts.splice(0),e.version&&(this.labState.version=e.version),e.sensors){console.log("Initializing sensors from initial state:",e.sensors);for(const[r,s]of Object.entries(e.sensors))console.log("Creating sensor:",r,s),this.labState.sensors.updateItem(r,s);console.log("Sensors after initial state:",this.labState.sensors.size)}else console.log("No sensors in initial state");if(e.equipment)for(const[r,s]of Object.entries(e.equipment))this.labState.equipment.updateItem(r,s);if(e.alerts&&Array.isArray(e.alerts))for(const r of e.alerts)this.labState.addAlert(r.message,r.severity||"info")}sendCommand(e,r={}){return this.ws&&this.ws.readyState===WebSocket.OPEN?(this.ws.send(JSON.stringify({type:"command",command:e,params:r})),!0):(this.labState.addAlert("Cannot send command - not connected","warning"),!1)}disconnect(){this.ws&&this.ws.close(),this.connectionStatus="disconnected",this.labState.isConnected=!1}reconnect(){this.disconnect(),this.reconnectAttempts=0,setTimeout(()=>this.connect(),100)}get isConnected(){return this.connectionStatus==="connected"}get canSendCommands(){return this.isConnected&&this.ws?.readyState===WebSocket.OPEN}}class Bn{pump;wsManager;#e=y(!1);get isCommandPending(){return a(this.#e)}set isCommandPending(e){m(this.#e,e,!0)}#t=y(null);get lastCommandResult(){return a(this.#t)}set lastCommandResult(e){m(this.#t,e,!0)}#r=F(()=>this.pump?this.pump.speed:0);get speedInputValue(){return a(this.#r)}set speedInputValue(e){m(this.#r,e)}constructor(e,r){this.pump=e,this.wsManager=r}async toggle(){if(!this.isCommandPending){this.isCommandPending=!0,this.lastCommandResult=null;try{this.wsManager.sendCommand("toggle_pump",{pumpId:this.pump.id})?(this.lastCommandResult=`Pump ${this.pump.isRunning?"stop":"start"} command sent`,this.pump.toggle()):this.lastCommandResult="Failed to send command"}catch(e){this.lastCommandResult=`Error: ${e}`}finally{this.isCommandPending=!1,setTimeout(()=>{this.lastCommandResult=null},3e3)}}}async setSpeed(e){if(!this.isCommandPending){this.isCommandPending=!0,this.lastCommandResult=null;try{const r=this.pump.speed,s=this.pump.setSpeed(e);this.wsManager.sendCommand("set_pump_speed",{pumpId:this.pump.id,speed:s})?this.lastCommandResult=`Speed set to ${s} RPM`:(this.lastCommandResult="Failed to send speed command",this.pump.setSpeed(r))}catch(r){this.lastCommandResult=`Error: ${r}`}finally{this.isCommandPending=!1,setTimeout(()=>{this.lastCommandResult=null},3e3)}}}onSpeedInputChange(e){const r=e.target,s=parseInt(r.value);isNaN(s)||this.setSpeed(s)}get toggleButtonText(){return this.isCommandPending?"Processing...":this.pump.isRunning?"Stop Pump":"Start Pump"}get speedDisplayText(){return`${this.pump.speed} RPM (${this.pump.speedPercentage.toFixed(1)}%)`}get canOperate(){return this.wsManager.canSendCommands&&!this.isCommandPending}get statusColor(){return this.pump.status==="running"?"green":this.pump.status==="error"?"red":"gray"}}const Fn=["bokeh-3.8.2.min.js","bokeh-gl-3.8.2.min.js","bokeh-widgets-3.8.2.min.js","bokeh-tables-3.8.2.min.js","bokeh-mathjax-3.8.2.min.js","bokeh-api-3.8.2.min.js"],_r=new Map;let zt=null;function Hn(){const{protocol:t,hostname:e,port:r}=window.location,n=[`${t}//${e}${r?`:${r}`:""}/assets`];return(r==="5173"||r==="4173")&&n.push("http://localhost:8000/assets"),n}function jn(t){const e=_r.get(t);if(e)return e;const r=new Promise((s,n)=>{const i=document.querySelector(`script[src="${t}"]`);if(i){if(i.__loaded){s();return}i.addEventListener("load",()=>s(),{once:!0}),i.addEventListener("error",()=>n(new Error(`Failed to load ${t}`)),{once:!0});return}const l=document.createElement("script");l.src=t,l.async=!0,l.onload=()=>{l.__loaded=!0,s()},l.onerror=()=>n(new Error(`Failed to load ${t}`)),document.head.appendChild(l)});return _r.set(t,r),r}async function Vn(){return window.Bokeh?.ColumnDataSource&&window.Bokeh?.Plotting?window.Bokeh:(zt||(zt=(async()=>{let t=null;for(const e of Hn())try{for(const s of Fn)await jn(`${e}/${s}`);const r=window.Bokeh;if(!r?.ColumnDataSource||!r?.Plotting)throw new Error("Bokeh namespace is missing required constructors");return r}catch(r){t=r}throw t??new Error("Unable to load BokehJS from known asset locations")})()),zt)}function Wn(t){return new t.ColumnDataSource({data:{x:[],y:[]}})}function Kn(t,e,r,s){for(t.data.x.push(e),t.data.y.push(r);t.data.x.length>s;)t.data.x.shift(),t.data.y.shift();t.change.emit()}var Yn=N('<div class="chart-error svelte-9sc5x"> </div>'),Jn=N('<div class="chart-container svelte-9sc5x"></div>'),Gn=N('<div class="chart-card svelte-9sc5x"><h3 class="svelte-9sc5x"> </h3> <!></div>');function Zn(t,e){Bt(e,!0);let r=fe(e,"sensor",3,null),s=fe(e,"series",19,()=>[]),n=fe(e,"title",3,"Realtime Sensor Plot"),i=fe(e,"maxPoints",3,300),l=fe(e,"height",3,280),v=fe(e,"xAxisLabel",3,"sample"),o=fe(e,"yAxisLabel",3,"value"),c=fe(e,"outputBackend",3,"webgl"),f=fe(e,"defaultLineColor",3,"#2f7dd6");const d=F(()=>r()?[{key:"primary",sensor:r(),color:f(),lineWidth:2}]:[]),u=F(()=>s().length>0?s():a(d));let h=y(null),g=y(null),I=y(null),E=y(null),S=y(null),P=!1;const U=new Map,O=new Map,C=new Map,q=new Map,j=new Map;function ce(){for(const w of C.values())w();C.clear()}function $e(w){if(!a(E))return;const b=new Set(w.map(A=>A.key));for(const[A,V]of O)b.has(A)||(a(E).renderers=a(E).renderers.filter(Be=>Be!==V),O.delete(A),U.delete(A),q.delete(A),j.delete(A))}function z(w){if(!(!a(E)||!a(g))){$e(w);for(const b of w){if(U.has(b.key))continue;const A=Wn(a(g));U.set(b.key,A);const V=a(E).line({field:"x"},{field:"y"},{source:A,line_color:b.color??f(),line_width:b.lineWidth??2});O.set(b.key,V)}}}function D(w,b){const A=U.get(w.key);if(!A)return;const V=j.get(w.key)??0;Kn(A,V,b,i()),j.set(w.key,V+1)}function te(w,b){const A=b.lastUpdated.getTime(),V=q.get(w.key);if(V!==void 0&&A<=V)return;q.set(w.key,A);const Be=w.valueAccessor?w.valueAccessor(b):b.value;D(w,Be)}function Ie(w){ce();for(const b of w){if(!b.sensor||!U.has(b.key))continue;const A=V=>{te(b,V)};C.set(b.key,b.sensor.subscribe(A)),A(b.sensor)}}Yr(()=>((async()=>{try{const w=await Vn();if(P||!a(h)||!w)return;m(g,w,!0),m(E,w.Plotting.figure({tools:"pan,xwheel_zoom,box_zoom,reset,save",active_scroll:"xwheel_zoom",sizing_mode:"stretch_width",height:l(),output_backend:c(),x_axis_label:v(),y_axis_label:o()}),!0),a(E).toolbar.logo=null;const b=new w.Document;b.add_root(a(E)),w.embed.add_document_standalone(b,a(h)),m(I,U,!0)}catch(w){m(S,`BokehJS unavailable: ${String(w)}`)}})(),()=>{P=!0,a(h)&&(a(h).innerHTML=""),ce(),U.clear(),O.clear(),q.clear(),j.clear(),m(I,null),m(E,null),m(g,null)})),jt(()=>{if(!a(E)||!a(g))return;const w=a(u);return z(w),Ie(w),()=>{ce()}});var pe=Gn(),me=p(pe),yt=p(me),Xe=_(me,2);{var et=w=>{var b=Yn(),A=p(b);K(()=>x(A,a(S))),M(w,b)},wt=w=>{var b=Jn();In(b,A=>m(h,A),()=>a(h)),M(w,b)};Z(Xe,w=>{a(S)?w(et):w(wt,!1)})}K(()=>x(yt,n())),M(t,pe),Ft()}var Qn=N('<span class="last-update svelte-zrm9kr"> </span>'),Xn=(t,e)=>e.reconnect(),ei=N('<button class="svelte-zrm9kr">Reconnect</button>'),ti=(t,e)=>e().reset(),ri=N('<button class="reset-btn svelte-zrm9kr">Reset</button>'),si=N('<div class="sensor-card svelte-zrm9kr"><h3 class="svelte-zrm9kr"> </h3> <div class="sensor-value svelte-zrm9kr"> </div> <div> </div> <div class="sensor-time svelte-zrm9kr"> </div> <div class="sensor-actions svelte-zrm9kr"><!></div></div>'),ni=N('<div class="equipment-prop svelte-zrm9kr"><strong class="svelte-zrm9kr"> </strong> </div>'),ii=(t,e)=>a(e).toggle(),ai=(t,e)=>a(e).onSpeedInputChange(t),oi=N('<div class="command-result svelte-zrm9kr"> </div>'),li=N('<div class="controls svelte-zrm9kr"><button class="toggle-btn svelte-zrm9kr"> </button> <label class="speed-control svelte-zrm9kr">Speed: <input type="range" class="svelte-zrm9kr"/> <span class="speed-display svelte-zrm9kr"> </span></label> <!></div>'),ui=N('<div class="command-entry svelte-zrm9kr"><code class="svelte-zrm9kr"> </code> <span class="command-time svelte-zrm9kr"> </span></div>'),ci=N('<details class="command-history svelte-zrm9kr"><summary class="svelte-zrm9kr"> </summary> <!></details>'),fi=N('<div class="equipment-card svelte-zrm9kr"><h3 class="svelte-zrm9kr"> </h3> <div class="equipment-status svelte-zrm9kr">Status: <span> </span></div> <!> <!> <!></div>'),di=N('<span class="critical-count svelte-zrm9kr"> </span>'),vi=(t,e,r)=>e.clearAlert(a(r).id),hi=N('<div><div class="alert-header svelte-zrm9kr"><span class="alert-message svelte-zrm9kr"> </span> <button class="alert-close svelte-zrm9kr">×</button></div> <div class="alert-time svelte-zrm9kr"> </div></div>'),pi=N('<div class="no-alerts svelte-zrm9kr">No alerts</div>'),mi=N('<div class="dashboard svelte-zrm9kr"><section class="sensors svelte-zrm9kr"><h2 class="svelte-zrm9kr"> </h2> <!> <!></section> <section class="equipment svelte-zrm9kr"><h2 class="svelte-zrm9kr"> </h2> <!></section> <section class="alerts svelte-zrm9kr"><h2 class="svelte-zrm9kr"> <!></h2> <!> <!></section> <section class="system-info svelte-zrm9kr"><h2 class="svelte-zrm9kr">System Info</h2> <div class="info-grid svelte-zrm9kr"><div class="info-item svelte-zrm9kr"><strong class="svelte-zrm9kr">Version:</strong> </div> <div class="info-item svelte-zrm9kr"><strong class="svelte-zrm9kr">Connected:</strong> </div> <div class="info-item svelte-zrm9kr"><strong class="svelte-zrm9kr">Active Sensors:</strong> </div> <div class="info-item svelte-zrm9kr"><strong class="svelte-zrm9kr">Running Equipment:</strong> </div> <div class="info-item svelte-zrm9kr"><strong class="svelte-zrm9kr">Last Update:</strong> </div></div> <details class="debug-section svelte-zrm9kr"><summary class="svelte-zrm9kr">Debug Info</summary> <pre class="svelte-zrm9kr"> </pre></details></section></div>'),_i=(t,e)=>e.reconnect(),gi=N('<button class="retry-btn svelte-zrm9kr">Retry Connection</button>'),yi=N('<div class="loading svelte-zrm9kr"><div class="loading-spinner svelte-zrm9kr"></div> <div class="svelte-zrm9kr">Loading lab state...</div> <!></div>'),wi=N('<main class="svelte-zrm9kr"><div class="header svelte-zrm9kr"><h1 class="svelte-zrm9kr">Lab Control Dashboard</h1> <div class="status svelte-zrm9kr"><span></span> <!> <!></div></div> <!></main>');function Si(t,e){Bt(e,!0);const r=new Un,s=new $n(r);let n=new Gt;Yr(()=>(s.connect(),()=>{s.disconnect()})),jt(()=>{n.clear();for(const[z,D]of r.equipment)if(D.type==="pump"){const te=r.getPump(z);te&&n.set(z,new Bn(te,s))}});function i(z){return n.get(z)}const l=F(()=>Array.from(r.sensors.entries())),v=F(()=>Array.from(r.equipment.entries())),o=F(()=>r.getSensor("temperature")??null),c=F(()=>[...r.alerts].sort((z,D)=>new Date(D.timestamp).getTime()-new Date(z.timestamp).getTime())),f=F(()=>r.sensors.size),d=F(()=>r.equipment.size),u=F(()=>a(f)>0||a(d)>0),h=F(()=>s.lastMessageTime?.toLocaleTimeString()??"Never");var g=wi(),I=p(g),E=_(p(I),2),S=p(E),P=_(S),U=_(P);{var O=z=>{var D=Qn(),te=p(D);K(()=>x(te,`Last update: ${a(h)??""}`)),M(z,D)};Z(U,z=>{s.lastMessageTime&&z(O)})}var C=_(U,2);{var q=z=>{var D=ei();D.__click=[Xn,s],M(z,D)};Z(C,z=>{s.connectionStatus!=="connected"&&z(q)})}var j=_(I,2);{var ce=z=>{var D=mi(),te=p(D),Ie=p(te),pe=p(Ie),me=_(Ie,2);Ye(me,17,()=>a(l),Ke,(B,$)=>{var re=F(()=>Pt(a($),2));let Ee=()=>a(re)[0],L=()=>a(re)[1];var Ce=si(),Pe=p(Ce),Fe=p(Pe),Ae=_(Pe,2),Re=p(Ae),He=_(Ae,2),tt=p(He),je=_(He,2),St=p(je),bt=_(je,2),kt=p(bt);{var se=ne=>{var R=ri();R.__click=[ti,L],M(ne,R)};Z(kt,ne=>{L().isHealthy||ne(se)})}K(()=>{x(Fe,Ee()),x(Re,L().formattedValue),nt(He,1,`sensor-status status-${L().status??""}`,"svelte-zrm9kr"),x(tt,L().status),x(St,`Updated: ${L().timeSinceUpdate??""}`)}),M(B,Ce)});var yt=_(me,2);Zn(yt,{get sensor(){return a(o)},title:"Temperature Trend (backend simulated data)",maxPoints:400});var Xe=_(te,2),et=p(Xe),wt=p(et),w=_(et,2);Ye(w,17,()=>a(v),Ke,(B,$)=>{var re=F(()=>Pt(a($),2));let Ee=()=>a(re)[0],L=()=>a(re)[1];var Ce=fi(),Pe=p(Ce),Fe=p(Pe),Ae=_(Pe,2),Re=_(p(Ae)),He=p(Re),tt=_(Ae,2);Ye(tt,17,()=>Object.entries(L().properties),Ke,(se,ne)=>{var R=F(()=>Pt(a(ne),2));let Ve=()=>a(R)[0],We=()=>a(R)[1];var _e=ni(),ge=p(_e),oe=p(ge),Oe=_(ge);K(()=>{x(oe,`${Ve()??""}:`),x(Oe,` ${We()??""}`)}),M(se,_e)});var je=_(tt,2);{var St=se=>{var ne=mn();const R=F(()=>i(Ee()));var Ve=Ws(ne);{var We=_e=>{var ge=li(),oe=p(ge);oe.__click=[ii,R];var Oe=p(oe),rt=_(oe,2),ye=_(p(rt));ye.__change=[ai,R];var xt=_(ye,2),Et=p(xt),cs=_(rt,2);{var fs=Ct=>{var nr=oi(),ds=p(nr);K(()=>x(ds,a(R).lastCommandResult)),M(Ct,nr)};Z(cs,Ct=>{a(R).lastCommandResult&&Ct(fs)})}K(()=>{oe.disabled=!a(R).canOperate,Cn(oe,`background-color: ${a(R).statusColor??""}`),x(Oe,a(R).toggleButtonText),dr(ye,"min",a(R).pump.minSpeed),dr(ye,"max",a(R).pump.maxSpeed),Tn(ye,a(R).speedInputValue),ye.disabled=!a(R).canOperate,x(Et,a(R).speedDisplayText)}),M(_e,ge)};Z(Ve,_e=>{a(R)&&_e(We)})}M(se,ne)};Z(je,se=>{L().type==="pump"&&se(St)})}var bt=_(je,2);{var kt=se=>{var ne=ci(),R=p(ne),Ve=p(R),We=_(R,2);Ye(We,17,()=>L().commandHistory.slice(-5),Ke,(_e,ge)=>{var oe=ui(),Oe=p(oe),rt=p(Oe),ye=_(Oe,2),xt=p(ye);K(Et=>{x(rt,a(ge).command),x(xt,Et)},[()=>a(ge).timestamp.toLocaleTimeString()]),M(_e,oe)}),K(()=>x(Ve,`Recent Commands (${L().commandHistory.length??""})`)),M(se,ne)};Z(bt,se=>{L().commandHistory.length>0&&se(kt)})}K(()=>{x(Fe,Ee()),nt(Re,1,`status-${L().status??""}`,"svelte-zrm9kr"),x(He,L().status)}),M(B,Ce)});var b=_(Xe,2),A=p(b),V=p(A),Be=_(V);{var Zr=B=>{var $=di(),re=p($);K(()=>x(re,`(${r.criticalAlerts.length??""} critical)`)),M(B,$)};Z(Be,B=>{r.criticalAlerts.length>0&&B(Zr)})}var Qt=_(A,2);Ye(Qt,17,()=>a(c),Ke,(B,$)=>{var re=hi(),Ee=p(re),L=p(Ee),Ce=p(L),Pe=_(L,2);Pe.__click=[vi,r,$];var Fe=_(Ee,2),Ae=p(Fe);K(Re=>{nt(re,1,`alert alert-${a($).severity??""}`,"svelte-zrm9kr"),x(Ce,a($).message),x(Ae,`${a($).timeAgo??""} • ${Re??""}`)},[()=>new Date(a($).timestamp).toLocaleTimeString()]),M(B,re)});var Qr=_(Qt,2);{var Xr=B=>{var $=pi();M(B,$)};Z(Qr,B=>{r.alerts.length===0&&B(Xr)})}var es=_(b,2),Xt=_(p(es),2),er=p(Xt),ts=_(p(er)),tr=_(er,2),rs=_(p(tr)),rr=_(tr,2),ss=_(p(rr)),sr=_(rr,2),ns=_(p(sr)),is=_(sr,2),as=_(p(is)),os=_(Xt,2),ls=_(p(os),2),us=p(ls);K((B,$)=>{x(pe,`Sensors (${a(f)??""})`),x(wt,`Equipment (${a(d)??""})`),x(V,`Alerts (${r.alerts.length??""}) `),x(ts,` ${r.version||"Unknown"}`),x(rs,` ${r.isConnected?"Yes":"No"}`),x(ss,` ${r.activeSensors.length??""}`),x(ns,` ${r.runningEquipment.length??""}`),x(as,` ${B??""}`),x(us,$)},[()=>r.lastUpdate.toLocaleTimeString(),()=>JSON.stringify(r.toObject(),null,2)]),M(z,D)},$e=z=>{var D=yi(),te=_(p(D),4);{var Ie=pe=>{var me=gi();me.__click=[_i,s],M(pe,me)};Z(te,pe=>{s.connectionStatus==="error"&&pe(Ie)})}M(z,D)};Z(j,z=>{a(u)?z(ce):z($e,!1)})}K(()=>{nt(S,1,`status-indicator ${s.connectionStatus??""}`,"svelte-zrm9kr"),x(P,` Status: ${s.connectionStatus??""} `)}),M(t,g),Ft()}hn(["click","change"]);_n(Si,{target:document.getElementById("app")});
