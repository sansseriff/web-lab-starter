(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const f of i.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&r(f)}).observe(document,{childList:!0,subtree:!0});function s(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(n){if(n.ep)return;n.ep=!0;const i=s(n);fetch(n.href,i)}})();const Bt=!1;var _t=Array.isArray,tr=Array.prototype.indexOf,gt=Array.from,sr=Object.defineProperty,qe=Object.getOwnPropertyDescriptor,rr=Object.getOwnPropertyDescriptors,nr=Object.prototype,ir=Array.prototype,ts=Object.getPrototypeOf,Wt=Object.isExtensible;function ct(t,e){if(Array.isArray(t))return t;if(!(Symbol.iterator in t))return Array.from(t);const s=[];for(const r of t)if(s.push(r),s.length===e)break;return s}const J=2,ss=4,yt=8,wt=16,ne=32,xe=64,St=128,D=256,Je=512,V=1024,re=2048,ge=4096,se=8192,bt=16384,rs=32768,kt=65536,Yt=1<<18,ar=1<<19,ns=1<<20,pt=1<<21,ft=Symbol("$state"),or=Symbol("");function is(t){return t===this.v}function lr(t,e){return t!=t?e==e:t!==e||t!==null&&typeof t=="object"||typeof t=="function"}function as(t){return!lr(t,this.v)}function ur(t){throw new Error("https://svelte.dev/e/effect_in_teardown")}function cr(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function fr(t){throw new Error("https://svelte.dev/e/effect_orphan")}function dr(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function vr(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function pr(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function hr(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}let mr=!1;const _r=1,gr=2,yr=16,wr=2,$=Symbol(),Sr="http://www.w3.org/1999/xhtml";function br(t){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}let U=null;function Kt(t){U=t}function os(t,e=!1,s){var r=U={p:U,c:null,d:!1,e:null,m:!1,s:t,x:null,l:null};Or(()=>{r.d=!0})}function ls(t){const e=U;if(e!==null){const f=e.e;if(f!==null){var s=k,r=w;e.e=null;try{for(var n=0;n<f.length;n++){var i=f[n];ke(i.effect),de(i.reaction),ys(i.fn)}}finally{ke(s),de(r)}}U=e.p,e.m=!0}return{}}function us(){return!0}function Q(t){if(typeof t!="object"||t===null||ft in t)return t;const e=ts(t);if(e!==nr&&e!==ir)return t;var s=new Map,r=_t(t),n=y(0),i=w,f=d=>{var a=w;de(i);var u=d();return de(a),u};return r&&s.set("length",y(t.length)),new Proxy(t,{defineProperty(d,a,u){(!("value"in u)||u.configurable===!1||u.enumerable===!1||u.writable===!1)&&vr();var c=s.get(a);return c===void 0?c=f(()=>{var v=y(u.value);return s.set(a,v),v}):_(c,u.value,!0),!0},deleteProperty(d,a){var u=s.get(a);if(u===void 0){if(a in d){const l=f(()=>y($));s.set(a,l),dt(n)}}else{if(r&&typeof a=="string"){var c=s.get("length"),v=Number(a);Number.isInteger(v)&&v<c.v&&_(c,v)}_(u,$),dt(n)}return!0},get(d,a,u){if(a===ft)return t;var c=s.get(a),v=a in d;if(c===void 0&&(!v||qe(d,a)?.writable)&&(c=f(()=>{var p=Q(v?d[a]:$),g=y(p);return g}),s.set(a,c)),c!==void 0){var l=o(c);return l===$?void 0:l}return Reflect.get(d,a,u)},getOwnPropertyDescriptor(d,a){var u=Reflect.getOwnPropertyDescriptor(d,a);if(u&&"value"in u){var c=s.get(a);c&&(u.value=o(c))}else if(u===void 0){var v=s.get(a),l=v?.v;if(v!==void 0&&l!==$)return{enumerable:!0,configurable:!0,value:l,writable:!0}}return u},has(d,a){if(a===ft)return!0;var u=s.get(a),c=u!==void 0&&u.v!==$||Reflect.has(d,a);if(u!==void 0||k!==null&&(!c||qe(d,a)?.writable)){u===void 0&&(u=f(()=>{var l=c?Q(d[a]):$,p=y(l);return p}),s.set(a,u));var v=o(u);if(v===$)return!1}return c},set(d,a,u,c){var v=s.get(a),l=a in d;if(r&&a==="length")for(var p=u;p<v.v;p+=1){var g=s.get(p+"");g!==void 0?_(g,$):p in d&&(g=f(()=>y($)),s.set(p+"",g))}if(v===void 0)(!l||qe(d,a)?.writable)&&(v=f(()=>y(void 0)),_(v,Q(u)),s.set(a,v));else{l=v.v!==$;var I=f(()=>Q(u));_(v,I)}var M=Reflect.getOwnPropertyDescriptor(d,a);if(M?.set&&M.set.call(c,u),!l){if(r&&typeof a=="string"){var b=s.get("length"),E=Number(a);Number.isInteger(E)&&E>=b.v&&_(b,E+1)}dt(n)}return!0},ownKeys(d){o(n);var a=Reflect.ownKeys(d).filter(v=>{var l=s.get(v);return l===void 0||l.v!==$});for(var[u,c]of s)c.v!==$&&!(u in d)&&a.push(u);return a},setPrototypeOf(){pr()}})}function dt(t,e=1){_(t,t.v+e)}function xt(t){var e=J|re,s=w!==null&&(w.f&J)!==0?w:null;return k===null||s!==null&&(s.f&D)!==0?e|=D:k.f|=ns,{ctx:U,deps:null,effects:null,equals:is,f:e,fn:t,reactions:null,rv:0,v:null,wv:0,parent:s??k}}function Y(t){const e=xt(t);return Es(e),e}function kr(t){const e=xt(t);return e.equals=as,e}function cs(t){var e=t.effects;if(e!==null){t.effects=null;for(var s=0;s<e.length;s+=1)fe(e[s])}}function xr(t){for(var e=t.parent;e!==null;){if((e.f&J)===0)return e;e=e.parent}return null}function fs(t){var e,s=k;ke(xr(t));try{cs(t),e=Ts(t)}finally{ke(s)}return e}function ds(t){var e=fs(t);if(t.equals(e)||(t.v=e,t.wv=Ps()),!Ce){var s=(ce||(t.f&D)!==0)&&t.deps!==null?ge:V;ee(t,s)}}const De=new Map;function ue(t,e){var s={f:0,v:t,reactions:null,equals:is,rv:0,wv:0};return s}function y(t,e){const s=ue(t);return Es(s),s}function Cr(t,e=!1,s=!0){const r=ue(t);return e||(r.equals=as),r}function _(t,e,s=!1){w!==null&&(!Z||(w.f&Yt)!==0)&&us()&&(w.f&(J|wt|Yt))!==0&&!(H?.[1].includes(t)&&H[0]===w)&&hr();let r=s?Q(e):e;return vs(t,r)}function vs(t,e){if(!t.equals(e)){var s=t.v;Ce?De.set(t,e):De.set(t,s),t.v=e,(t.f&J)!==0&&((t.f&re)!==0&&fs(t),ee(t,(t.f&D)===0?V:ge)),t.wv=Ps(),ps(t,re),k!==null&&(k.f&V)!==0&&(k.f&(ne|xe))===0&&(L===null?qr([t]):L.push(t))}return e}function ps(t,e){var s=t.reactions;if(s!==null)for(var r=s.length,n=0;n<r;n++){var i=s[n],f=i.f;(f&re)===0&&(ee(i,e),(f&(V|D))!==0&&((f&J)!==0?ps(i,ge):Tt(i)))}}let Er=!1;var Jt,hs,ms,_s;function Ar(){if(Jt===void 0){Jt=window,hs=/Firefox/.test(navigator.userAgent);var t=Element.prototype,e=Node.prototype,s=Text.prototype;ms=qe(e,"firstChild").get,_s=qe(e,"nextSibling").get,Wt(t)&&(t.__click=void 0,t.__className=void 0,t.__attributes=null,t.__style=void 0,t.__e=void 0),Wt(s)&&(s.__t=void 0)}}function gs(t=""){return document.createTextNode(t)}function Ct(t){return ms.call(t)}function tt(t){return _s.call(t)}function h(t,e){return Ct(t)}function Pr(t,e){{var s=Ct(t);return s instanceof Comment&&s.data===""?tt(s):s}}function m(t,e=1,s=!1){let r=t;for(;e--;)r=tt(r);return r}function zr(t){t.textContent=""}function Tr(t){k===null&&w===null&&fr(),w!==null&&(w.f&D)!==0&&k===null&&cr(),Ce&&ur()}function Ir(t,e){var s=e.last;s===null?e.last=e.first=t:(s.next=t,t.prev=s,e.last=t)}function Fe(t,e,s,r=!0){var n=k,i={ctx:U,deps:null,nodes_start:null,nodes_end:null,f:t|re,first:null,fn:e,last:null,next:null,parent:n,prev:null,teardown:null,transitions:null,wv:0};if(s)try{zt(i),i.f|=rs}catch(a){throw fe(i),a}else e!==null&&Tt(i);var f=s&&i.deps===null&&i.first===null&&i.nodes_start===null&&i.teardown===null&&(i.f&(ns|St))===0;if(!f&&r&&(n!==null&&Ir(i,n),w!==null&&(w.f&J)!==0)){var d=w;(d.effects??=[]).push(i)}return i}function Or(t){const e=Fe(yt,null,!1);return ee(e,V),e.teardown=t,e}function Et(t){Tr();var e=k!==null&&(k.f&ne)!==0&&U!==null&&!U.m;if(e){var s=U;(s.e??=[]).push({fn:t,effect:k,reaction:w})}else{var r=ys(t);return r}}function Rr(t){const e=Fe(xe,t,!0);return(s={})=>new Promise(r=>{s.outro?Ge(e,()=>{fe(e),r(void 0)}):(fe(e),r(void 0))})}function ys(t){return Fe(ss,t,!1)}function F(t,e=[],s=xt){const r=e.map(s);return At(()=>t(...r.map(o)))}function At(t,e=0){return Fe(yt|wt|e,t,!0)}function Ue(t,e=!0){return Fe(yt|ne,t,!0,e)}function ws(t){var e=t.teardown;if(e!==null){const s=Ce,r=w;Gt(!0),de(null);try{e.call(null)}finally{Gt(s),de(r)}}}function Ss(t,e=!1){var s=t.first;for(t.first=t.last=null;s!==null;){var r=s.next;(s.f&xe)!==0?s.parent=null:fe(s,e),s=r}}function Nr(t){for(var e=t.first;e!==null;){var s=e.next;(e.f&ne)===0&&fe(e),e=s}}function fe(t,e=!0){var s=!1;(e||(t.f&ar)!==0)&&t.nodes_start!==null&&t.nodes_end!==null&&($r(t.nodes_start,t.nodes_end),s=!0),Ss(t,e&&!s),et(t,0),ee(t,bt);var r=t.transitions;if(r!==null)for(const i of r)i.stop();ws(t);var n=t.parent;n!==null&&n.first!==null&&bs(t),t.next=t.prev=t.teardown=t.ctx=t.deps=t.fn=t.nodes_start=t.nodes_end=null}function $r(t,e){for(;t!==null;){var s=t===e?null:tt(t);t.remove(),t=s}}function bs(t){var e=t.parent,s=t.prev,r=t.next;s!==null&&(s.next=r),r!==null&&(r.prev=s),e!==null&&(e.first===t&&(e.first=r),e.last===t&&(e.last=s))}function Ge(t,e){var s=[];Pt(t,s,!0),ks(s,()=>{fe(t),e&&e()})}function ks(t,e){var s=t.length;if(s>0){var r=()=>--s||e();for(var n of t)n.out(r)}else e()}function Pt(t,e,s){if((t.f&se)===0){if(t.f^=se,t.transitions!==null)for(const f of t.transitions)(f.is_global||s)&&e.push(f);for(var r=t.first;r!==null;){var n=r.next,i=(r.f&kt)!==0||(r.f&ne)!==0;Pt(r,e,i?s:!1),r=n}}}function Xe(t){xs(t,!0)}function xs(t,e){if((t.f&se)!==0){t.f^=se;for(var s=t.first;s!==null;){var r=s.next,n=(s.f&kt)!==0||(s.f&ne)!==0;xs(s,n?e:!1),s=r}if(t.transitions!==null)for(const i of t.transitions)(i.is_global||e)&&i.in()}}function Mr(t){var e=k;if((e.f&rs)===0){if((e.f&St)===0)throw t;e.fn(t)}else Cs(t,e)}function Cs(t,e){for(;e!==null;){if((e.f&St)!==0)try{e.fn(t);return}catch{}e=e.parent}throw t}let ht=!1,Ze=null,_e=!1,Ce=!1;function Gt(t){Ce=t}let Ke=[];let w=null,Z=!1;function de(t){w=t}let k=null;function ke(t){k=t}let H=null;function Es(t){w!==null&&w.f&pt&&(H===null?H=[w,[t]]:H[1].push(t))}let N=null,q=0,L=null;function qr(t){L=t}let As=1,Qe=0,ce=!1;function Ps(){return++As}function st(t){var e=t.f;if((e&re)!==0)return!0;if((e&ge)!==0){var s=t.deps,r=(e&D)!==0;if(s!==null){var n,i,f=(e&Je)!==0,d=r&&k!==null&&!ce,a=s.length;if(f||d){var u=t,c=u.parent;for(n=0;n<a;n++)i=s[n],(f||!i?.reactions?.includes(u))&&(i.reactions??=[]).push(u);f&&(u.f^=Je),d&&c!==null&&(c.f&D)===0&&(u.f^=D)}for(n=0;n<a;n++)if(i=s[n],st(i)&&ds(i),i.wv>t.wv)return!0}(!r||k!==null&&!ce)&&ee(t,V)}return!1}function zs(t,e,s=!0){var r=t.reactions;if(r!==null)for(var n=0;n<r.length;n++){var i=r[n];H?.[1].includes(t)&&H[0]===w||((i.f&J)!==0?zs(i,e,!1):e===i&&(s?ee(i,re):(i.f&V)!==0&&ee(i,ge),Tt(i)))}}function Ts(t){var e=N,s=q,r=L,n=w,i=ce,f=H,d=U,a=Z,u=t.f;N=null,q=0,L=null,ce=(u&D)!==0&&(Z||!_e||w===null),w=(u&(ne|xe))===0?t:null,H=null,Kt(t.ctx),Z=!1,Qe++,t.f|=pt;try{var c=(0,t.fn)(),v=t.deps;if(N!==null){var l;if(et(t,q),v!==null&&q>0)for(v.length=q+N.length,l=0;l<N.length;l++)v[q+l]=N[l];else t.deps=v=N;if(!ce)for(l=q;l<v.length;l++)(v[l].reactions??=[]).push(t)}else v!==null&&q<v.length&&(et(t,q),v.length=q);if(us()&&L!==null&&!Z&&v!==null&&(t.f&(J|ge|re))===0)for(l=0;l<L.length;l++)zs(L[l],t);return n!==null&&n!==t&&(Qe++,L!==null&&(r===null?r=L:r.push(...L))),c}catch(p){Mr(p)}finally{N=e,q=s,L=r,w=n,ce=i,H=f,Kt(d),Z=a,t.f^=pt}}function Dr(t,e){let s=e.reactions;if(s!==null){var r=tr.call(s,t);if(r!==-1){var n=s.length-1;n===0?s=e.reactions=null:(s[r]=s[n],s.pop())}}s===null&&(e.f&J)!==0&&(N===null||!N.includes(e))&&(ee(e,ge),(e.f&(D|Je))===0&&(e.f^=Je),cs(e),et(e,0))}function et(t,e){var s=t.deps;if(s!==null)for(var r=e;r<s.length;r++)Dr(t,s[r])}function zt(t){var e=t.f;if((e&bt)===0){ee(t,V);var s=k,r=_e;k=t,_e=!0;try{(e&wt)!==0?Nr(t):Ss(t),ws(t);var n=Ts(t);t.teardown=typeof n=="function"?n:null,t.wv=As;var i;Bt&&mr&&(t.f&re)!==0&&t.deps}finally{_e=r,k=s}}}function Ur(){try{dr()}catch(t){if(Ze!==null)Cs(t,Ze);else throw t}}function Fr(){var t=_e;try{var e=0;for(_e=!0;Ke.length>0;){e++>1e3&&Ur();var s=Ke,r=s.length;Ke=[];for(var n=0;n<r;n++){var i=Hr(s[n]);Lr(i)}De.clear()}}finally{ht=!1,_e=t,Ze=null}}function Lr(t){var e=t.length;if(e!==0)for(var s=0;s<e;s++){var r=t[s];(r.f&(bt|se))===0&&st(r)&&(zt(r),r.deps===null&&r.first===null&&r.nodes_start===null&&(r.teardown===null?bs(r):r.fn=null))}}function Tt(t){ht||(ht=!0,queueMicrotask(Fr));for(var e=Ze=t;e.parent!==null;){e=e.parent;var s=e.f;if((s&(xe|ne))!==0){if((s&V)===0)return;e.f^=V}}Ke.push(e)}function Hr(t){for(var e=[],s=t;s!==null;){var r=s.f,n=(r&(ne|xe))!==0,i=n&&(r&V)!==0;if(!i&&(r&se)===0){(r&ss)!==0?e.push(s):n?s.f^=V:st(s)&&zt(s);var f=s.first;if(f!==null){s=f;continue}}var d=s.parent;for(s=s.next;s===null&&d!==null;)s=d.next,d=d.parent}return e}function o(t){var e=t.f,s=(e&J)!==0;if(w!==null&&!Z){if(!H?.[1].includes(t)||H[0]!==w){var r=w.deps;t.rv<Qe&&(t.rv=Qe,N===null&&r!==null&&r[q]===t?q++:N===null?N=[t]:(!ce||!N.includes(t))&&N.push(t))}}else if(s&&t.deps===null&&t.effects===null){var n=t,i=n.parent;i!==null&&(i.f&D)===0&&(n.f^=D)}return s&&(n=t,st(n)&&ds(n)),Ce&&De.has(t)?De.get(t):t.v}function Vr(t){var e=Z;try{return Z=!0,t()}finally{Z=e}}const jr=-7169;function ee(t,e){t.f=t.f&jr|e}const Br=["touchstart","touchmove"];function Wr(t){return Br.includes(t)}const Is=new Set,mt=new Set;function Yr(t){for(var e=0;e<t.length;e++)Is.add(t[e]);for(var s of mt)s(t)}function We(t){var e=this,s=e.ownerDocument,r=t.type,n=t.composedPath?.()||[],i=n[0]||t.target,f=0,d=t.__root;if(d){var a=n.indexOf(d);if(a!==-1&&(e===document||e===window)){t.__root=e;return}var u=n.indexOf(e);if(u===-1)return;a<=u&&(f=a)}if(i=n[f]||t.target,i!==e){sr(t,"currentTarget",{configurable:!0,get(){return i||s}});var c=w,v=k;de(null),ke(null);try{for(var l,p=[];i!==null;){var g=i.assignedSlot||i.parentNode||i.host||null;try{var I=i["__"+r];if(I!=null&&(!i.disabled||t.target===i))if(_t(I)){var[M,...b]=I;M.apply(i,[t,...b])}else I.call(i,t)}catch(E){l?p.push(E):l=E}if(t.cancelBubble||g===e||g===null)break;i=g}if(l){for(let E of p)queueMicrotask(()=>{throw E});throw l}}finally{t.__root=e,delete t.currentTarget,de(c),ke(v)}}}function Kr(t){var e=document.createElement("template");return e.innerHTML=t.replaceAll("<!>","<!---->"),e.content}function Os(t,e){var s=k;s.nodes_start===null&&(s.nodes_start=t,s.nodes_end=e)}function T(t,e){var s=(e&wr)!==0,r,n=!t.startsWith("<!>");return()=>{r===void 0&&(r=Kr(n?t:"<!>"+t),r=Ct(r));var i=s||hs?document.importNode(r,!0):r.cloneNode(!0);return Os(i,i),i}}function Jr(){var t=document.createDocumentFragment(),e=document.createComment(""),s=gs();return t.append(e,s),Os(e,s),t}function A(t,e){t!==null&&t.before(e)}function S(t,e){var s=e==null?"":typeof e=="object"?e+"":e;s!==(t.__t??=t.nodeValue)&&(t.__t=s,t.nodeValue=s+"")}function Gr(t,e){return Xr(t,e)}const be=new Map;function Xr(t,{target:e,anchor:s,props:r={},events:n,context:i,intro:f=!0}){Ar();var d=new Set,a=v=>{for(var l=0;l<v.length;l++){var p=v[l];if(!d.has(p)){d.add(p);var g=Wr(p);e.addEventListener(p,We,{passive:g});var I=be.get(p);I===void 0?(document.addEventListener(p,We,{passive:g}),be.set(p,1)):be.set(p,I+1)}}};a(gt(Is)),mt.add(a);var u=void 0,c=Rr(()=>{var v=s??e.appendChild(gs());return Ue(()=>{if(i){os({});var l=U;l.c=i}n&&(r.$$events=n),u=t(v,r)||{},i&&ls()}),()=>{for(var l of d){e.removeEventListener(l,We);var p=be.get(l);--p===0?(document.removeEventListener(l,We),be.delete(l)):be.set(l,p)}mt.delete(a),v!==s&&v.parentNode?.removeChild(v)}});return Zr.set(u,c),u}let Zr=new WeakMap;function K(t,e,[s,r]=[0,0]){var n=t,i=null,f=null,d=$,a=s>0?kt:0,u=!1;const c=(l,p=!0)=>{u=!0,v(p,l)},v=(l,p)=>{d!==(d=l)&&(d?(i?Xe(i):p&&(i=Ue(()=>p(n))),f&&Ge(f,()=>{f=null})):(f?Xe(f):p&&(f=Ue(()=>p(n,[s+1,r]))),i&&Ge(i,()=>{i=null})))};At(()=>{u=!1,e(c),u||v(null,null)},a)}function Ne(t,e){return e}function Qr(t,e,s,r){for(var n=[],i=e.length,f=0;f<i;f++)Pt(e[f].e,n,!0);var d=i>0&&n.length===0&&s!==null;if(d){var a=s.parentNode;zr(a),a.append(s),r.clear(),le(t,e[0].prev,e[i-1].next)}ks(n,()=>{for(var u=0;u<i;u++){var c=e[u];d||(r.delete(c.k),le(t,c.prev,c.next)),fe(c.e,!d)}})}function $e(t,e,s,r,n,i=null){var f=t,d={flags:e,items:new Map,first:null},a=null,u=!1,c=kr(()=>{var v=s();return _t(v)?v:v==null?[]:gt(v)});At(()=>{var v=o(c),l=v.length;u&&l===0||(u=l===0,en(v,d,f,n,e,r,s),i!==null&&(l===0?a?Xe(a):a=Ue(()=>i(f)):a!==null&&Ge(a,()=>{a=null})),o(c))})}function en(t,e,s,r,n,i,f){var d=t.length,a=e.items,u=e.first,c=u,v,l=null,p=[],g=[],I,M,b,E;for(E=0;E<d;E+=1){if(I=t[E],M=i(I,E),b=a.get(M),b===void 0){var rt=c?c.e.nodes_start:s;l=sn(rt,e,l,l===null?e.first:l.next,I,M,E,r,n,f),a.set(M,l),p=[],g=[],c=l.next;continue}if(tn(b,I,E),(b.e.f&se)!==0&&Xe(b.e),b!==c){if(v!==void 0&&v.has(b)){if(p.length<g.length){var ye=g[0],G;l=ye.prev;var Le=p[0],Ee=p[p.length-1];for(G=0;G<p.length;G+=1)Xt(p[G],ye,s);for(G=0;G<g.length;G+=1)v.delete(g[G]);le(e,Le.prev,Ee.next),le(e,l,Le),le(e,Ee,ye),c=ye,l=Ee,E-=1,p=[],g=[]}else v.delete(b),Xt(b,c,s),le(e,b.prev,b.next),le(e,b,l===null?e.first:l.next),le(e,l,b),l=b;continue}for(p=[],g=[];c!==null&&c.k!==M;)(c.e.f&se)===0&&(v??=new Set).add(c),g.push(c),c=c.next;if(c===null)continue;b=c}p.push(b),l=b,c=b.next}if(c!==null||v!==void 0){for(var Ae=v===void 0?[]:gt(v);c!==null;)(c.e.f&se)===0&&Ae.push(c),c=c.next;var x=Ae.length;if(x>0){var P=null;Qr(e,Ae,P,a)}}k.first=e.first&&e.first.e,k.last=l&&l.e}function tn(t,e,s,r){vs(t.v,e),t.i=s}function sn(t,e,s,r,n,i,f,d,a,u){var c=(a&_r)!==0,v=(a&yr)===0,l=c?v?Cr(n,!1,!1):ue(n):n,p=(a&gr)===0?f:ue(f),g={i:p,v:l,k:i,a:null,e:null,prev:s,next:r};try{return g.e=Ue(()=>d(t,l,p,u),Er),g.e.prev=s&&s.e,g.e.next=r&&r.e,s===null?e.first=g:(s.next=g,s.e.next=g.e),r!==null&&(r.prev=g,r.e.prev=g.e),g}finally{}}function Xt(t,e,s){for(var r=t.next?t.next.e.nodes_start:s,n=e?e.e.nodes_start:s,i=t.e.nodes_start;i!==r;){var f=tt(i);n.before(i),i=f}}function le(t,e,s){e===null?t.first=s:(e.next=s,e.e.next=s&&s.e),s!==null&&(s.prev=e,s.e.prev=e&&e.e)}function rn(t,e,s){var r=t==null?"":""+t;return r=r?r+" "+e:e,r===""?null:r}function nn(t,e){return t==null?null:String(t)}function Ye(t,e,s,r,n,i){var f=t.__className;if(f!==s||f===void 0){var d=rn(s,r);d==null?t.removeAttribute("class"):t.className=d,t.__className=s}return i}function an(t,e,s,r){var n=t.__style;if(n!==e){var i=nn(e);i==null?t.removeAttribute("style"):t.style.cssText=i,t.__style=e}return r}const on=Symbol("is custom element"),ln=Symbol("is html");function un(t,e){var s=Rs(t);s.value===(s.value=e??void 0)||t.value===e&&(e!==0||t.nodeName!=="PROGRESS")||(t.value=e??"")}function Zt(t,e,s,r){var n=Rs(t);n[e]!==(n[e]=s)&&(e==="loading"&&(t[or]=s),s==null?t.removeAttribute(e):typeof s!="string"&&cn(t).includes(e)?t[e]=s:t.setAttribute(e,s))}function Rs(t){return t.__attributes??={[on]:t.nodeName.includes("-"),[ln]:t.namespaceURI===Sr}}var Qt=new Map;function cn(t){var e=Qt.get(t.nodeName);if(e)return e;Qt.set(t.nodeName,e=[]);for(var s,r=t,n=Element.prototype;n!==r;){s=rr(r);for(var i in s)s[i].set&&e.push(i);r=ts(r)}return e}function fn(t){U===null&&br(),Et(()=>{const e=Vr(t);if(typeof e=="function")return e})}const dn="5";typeof window<"u"&&((window.__svelte??={}).v??=new Set).add(dn);function Me(t){_(t,t.v+1)}class It extends Map{#e=new Map;#t=y(0);#s=y(0);constructor(e){if(super(),e){for(var[s,r]of e)super.set(s,r);this.#s.v=super.size}}has(e){var s=this.#e,r=s.get(e);if(r===void 0){var n=super.get(e);if(n!==void 0)r=ue(0),s.set(e,r);else return o(this.#t),!1}return o(r),!0}forEach(e,s){this.#r(),super.forEach(e,s)}get(e){var s=this.#e,r=s.get(e);if(r===void 0){var n=super.get(e);if(n!==void 0)r=ue(0),s.set(e,r);else{o(this.#t);return}}return o(r),super.get(e)}set(e,s){var r=this.#e,n=r.get(e),i=super.get(e),f=super.set(e,s),d=this.#t;if(n===void 0)n=ue(0),r.set(e,n),_(this.#s,super.size),Me(d);else if(i!==s){Me(n);var a=d.reactions===null?null:new Set(d.reactions),u=a===null||!n.reactions?.every(c=>a.has(c));u&&Me(d)}return f}delete(e){var s=this.#e,r=s.get(e),n=super.delete(e);return r!==void 0&&(s.delete(e),_(this.#s,super.size),_(r,-1),Me(this.#t)),n}clear(){if(super.size!==0){super.clear();var e=this.#e;_(this.#s,0);for(var s of e.values())_(s,-1);Me(this.#t),e.clear()}}#r(){o(this.#t);var e=this.#e;if(this.#s.v!==e.size){for(var s of super.keys())if(!e.has(s)){var r=ue(0);e.set(s,r)}}for([,r]of this.#e)o(r)}keys(){return o(this.#t),super.keys()}values(){return this.#r(),super.values()}entries(){return this.#r(),super.entries()}[Symbol.iterator](){return this.entries()}get size(){return o(this.#s),super.size}}class Ot{#e=y("");get id(){return o(this.#e)}set id(e){_(this.#e,e,!0)}#t=y("");get type(){return o(this.#t)}set type(e){_(this.#t,e,!0)}#s=y(Q(new Date));get lastUpdated(){return o(this.#s)}set lastUpdated(e){_(this.#s,e,!0)}constructor(e,s){this.id=e,this.type=s}updateProperty(e,s){if(e.length!==0)if(e.length===1){const[r]=e;r in this&&(this[r]=s,this.lastUpdated=new Date)}else{const[r,...n]=e,i=this[r];if(i&&typeof i=="object")if("updateProperty"in i)i.updateProperty(n,s);else if(i instanceof Map||i instanceof It){const[f,...d]=n,a=i.get(f);a&&"updateProperty"in a&&a.updateProperty(d,s)}else this.updateNestedObject(i,n,s)}}updateNestedObject(e,s,r){if(s.length===1)e[s[0]]=r;else{const[n,...i]=s;e[n]||(e[n]={}),this.updateNestedObject(e[n],i,r)}}}class vt{items=new It;entityFactory;constructor(e){this.entityFactory=e}get(e){return this.items.get(e)}set(e,s){this.items.set(e,s)}has(e){return this.items.has(e)}delete(e){return this.items.delete(e)}clear(){this.items.clear()}get size(){return this.items.size}keys(){return this.items.keys()}values(){return this.items.values()}entries(){return this.items.entries()}[Symbol.iterator](){return this.items.entries()}updateItem(e,s){let r=this.items.get(e);return r?r.update(s):(r=this.entityFactory(e,s),this.items.set(e,r)),r}updateItemProperty(e,s,r){let n=this.items.get(e);return n||(n=this.entityFactory(e,{}),this.items.set(e,n)),n.updateProperty(s,r),n}toObject(){const e={};for(const[s,r]of this.items)e[s]=r.toObject();return e}}class vn{#e=y(Q([]));get items(){return o(this.#e)}set items(e){_(this.#e,e,!0)}get length(){return this.items.length}push(e){this.items.push(e)}unshift(e){this.items.unshift(e)}splice(e,s){return this.items.splice(e,s)}filter(e){return this.items.filter(e)}map(e){return this.items.map(e)}find(e){return this.items.find(e)}findIndex(e){return this.items.findIndex(e)}get array(){return this.items}[Symbol.iterator](){return this.items[Symbol.iterator]()}}class pn extends Ot{#e=y(0);get value(){return o(this.#e)}set value(e){_(this.#e,e,!0)}#t=y("");get unit(){return o(this.#t)}set unit(e){_(this.#t,e,!0)}#s=y("normal");get status(){return o(this.#s)}set status(e){_(this.#s,e,!0)}constructor(e,s){super(e,"sensor"),s&&this.update(s)}update(e){e.value!==void 0&&(this.value=e.value),e.unit!==void 0&&(this.unit=e.unit),e.status!==void 0&&(this.status=e.status),this.lastUpdated=new Date}get isHealthy(){return this.status==="normal"}get formattedValue(){return`${this.value} ${this.unit}`}get timeSinceUpdate(){const s=new Date().getTime()-this.lastUpdated.getTime();return`${Math.floor(s/1e3)}s ago`}calibrate(){console.log(`Calibrating sensor ${this.id}`)}reset(){this.value=0,this.status="normal",this.lastUpdated=new Date}toObject(){return{id:this.id,type:this.type,value:this.value,unit:this.unit,status:this.status,lastUpdated:this.lastUpdated}}}class Ns extends Ot{#e=y("stopped");get status(){return o(this.#e)}set status(e){_(this.#e,e,!0)}#t=y(Q({}));get properties(){return o(this.#t)}set properties(e){_(this.#t,e,!0)}#s=y(null);get lastCommand(){return o(this.#s)}set lastCommand(e){_(this.#s,e,!0)}#r=y(Q([]));get commandHistory(){return o(this.#r)}set commandHistory(e){_(this.#r,e,!0)}constructor(e,s,r){super(e,s),r&&this.update(r)}update(e){e.status!==void 0&&(this.status=e.status),e.properties&&Object.assign(this.properties,e.properties),this.lastUpdated=new Date}updateProperty(e,s){e.length===1&&e[0]==="properties"?Object.assign(this.properties,s):e.length===2&&e[0]==="properties"?this.properties[e[1]]=s:super.updateProperty(e,s)}get isRunning(){return this.status==="running"}get canStart(){return this.status==="stopped"}get canStop(){return this.status==="running"}start(){return this.canStart?(this.status="running",this.addToHistory("start"),!0):!1}stop(){return this.canStop?(this.status="stopped",this.addToHistory("stop"),!0):!1}toggle(){return this.isRunning?this.stop():this.start()}addToHistory(e){this.lastCommand=e,this.commandHistory.push({command:e,timestamp:new Date}),this.commandHistory.length>10&&this.commandHistory.shift()}toObject(){return{id:this.id,type:this.type,status:this.status,properties:{...this.properties},lastCommand:this.lastCommand,commandHistory:this.commandHistory.map(e=>({command:e.command,timestamp:e.timestamp.toISOString()})),lastUpdated:this.lastUpdated}}}class $s extends Ns{#e=y(0);get speed(){return o(this.#e)}set speed(e){_(this.#e,e,!0)}#t=y(2e3);get maxSpeed(){return o(this.#t)}set maxSpeed(e){_(this.#t,e,!0)}#s=y(500);get minSpeed(){return o(this.#s)}set minSpeed(e){_(this.#s,e,!0)}constructor(e,s){super(e,"pump"),s?.speed!==void 0&&(this.speed=s.speed),s?.maxSpeed!==void 0&&(this.maxSpeed=s.maxSpeed),s?.minSpeed!==void 0&&(this.minSpeed=s.minSpeed),s&&super.update(s)}update(e){super.update(e),e.speed!==void 0&&(this.speed=e.speed),e.maxSpeed!==void 0&&(this.maxSpeed=e.maxSpeed),e.minSpeed!==void 0&&(this.minSpeed=e.minSpeed)}get speedPercentage(){return(this.speed-this.minSpeed)/(this.maxSpeed-this.minSpeed)*100}setSpeed(e){const s=Math.max(this.minSpeed,Math.min(this.maxSpeed,e));return this.speed=s,this.updateProperty(["speed"],s),this.addToHistory(`set_speed_${s}`),s}toObject(){return{...super.toObject(),speed:this.speed,maxSpeed:this.maxSpeed,minSpeed:this.minSpeed,speedPercentage:this.speedPercentage}}}class es extends Ot{#e=y("");get message(){return o(this.#e)}set message(e){_(this.#e,e,!0)}#t=y("");get timestamp(){return o(this.#t)}set timestamp(e){_(this.#t,e,!0)}#s=y("info");get severity(){return o(this.#s)}set severity(e){_(this.#s,e,!0)}constructor(e,s="info"){super(Math.random().toString(36).substr(2,9),"alert"),this.message=e,this.severity=s,this.timestamp=new Date().toISOString()}update(e){e.message!==void 0&&(this.message=e.message),e.severity!==void 0&&(this.severity=e.severity),e.timestamp!==void 0&&(this.timestamp=e.timestamp),this.lastUpdated=new Date}get timeAgo(){const e=new Date,s=new Date(this.timestamp),r=e.getTime()-s.getTime(),n=Math.floor(r/6e4);if(n<1)return"Just now";if(n<60)return`${n}m ago`;const i=Math.floor(n/60);return i<24?`${i}h ago`:`${Math.floor(i/24)}d ago`}toObject(){return{id:this.id,type:this.type,message:this.message,severity:this.severity,timestamp:this.timestamp,timeAgo:this.timeAgo,lastUpdated:this.lastUpdated}}}const hn=(t,e)=>new pn(t,e),mn=(t,e)=>t.includes("pump")?new $s(t,e):new Ns(t,"generic",e);class _n{sensors=new vt(hn);equipment=new vt(mn);alerts=new vn;collections=new Map;#e=y("");get version(){return o(this.#e)}set version(e){_(this.#e,e,!0)}#t=y(!1);get isConnected(){return o(this.#t)}set isConnected(e){_(this.#t,e,!0)}#s=y(Q(new Date));get lastUpdate(){return o(this.#s)}set lastUpdate(e){_(this.#s,e,!0)}constructor(){this.collections.set("sensors",this.sensors),this.collections.set("equipment",this.equipment)}registerCollection(e,s){const r=new vt(s);return this.collections.set(e,r),this[e]=r,r}applyJsonPatch(e){const s=Array.isArray(e)?e:[e];for(const r of s)this.applySinglePatch(r);this.lastUpdate=new Date}applySinglePatch(e){const{op:s,path:r,value:n}=e,i=r.split("/").filter(c=>c);if(i.length===0)return;const[f,d,...a]=i;if(f==="version"){s==="replace"&&(this.version=n);return}if(f==="alerts"){this.handleAlertPatch(s,d,a,n);return}const u=this.collections.get(f);u?this.handleCollectionPatch(u,s,d,a,n):console.warn(`Unknown collection: ${f}`)}handleCollectionPatch(e,s,r,n,i){s==="add"||s==="replace"?n.length===0?e.updateItem(r,i):e.updateItemProperty(r,n,i):s==="remove"&&e.delete(r)}handleAlertPatch(e,s,r,n){if(e==="add"){const i=new es(n.message,n.severity||"info");this.alerts.unshift(i),this.alerts.length>50&&this.alerts.splice(50)}else if(e==="remove"){const i=parseInt(s);!isNaN(i)&&i<this.alerts.length&&this.alerts.splice(i,1)}}get criticalAlerts(){return this.alerts.filter(e=>e.severity==="error")}get activeSensors(){return Array.from(this.sensors.values()).filter(e=>e.isHealthy)}get runningEquipment(){return Array.from(this.equipment.values()).filter(e=>e.isRunning)}getSensor(e){return this.sensors.get(e)}getEquipment(e){return this.equipment.get(e)}getPump(e){const s=this.equipment.get(e);return s instanceof $s?s:null}getCollection(e){return this.collections.get(e)}addAlert(e,s="info"){const r=new es(e,s);this.alerts.unshift(r),this.alerts.length>50&&this.alerts.splice(50)}clearAlert(e){const s=this.alerts.findIndex(r=>r.id===e);s>=0&&this.alerts.splice(s,1)}toObject(){const e={version:this.version,isConnected:this.isConnected,lastUpdate:this.lastUpdate,alerts:this.alerts.map(s=>s.toObject())};for(const[s,r]of this.collections)e[s]=r.toObject();return e}}const gn={};class yn{labState;ws=null;clientId=null;reconnectAttempts=0;maxReconnectAttempts=5;#e=y("disconnected");get connectionStatus(){return o(this.#e)}set connectionStatus(e){_(this.#e,e,!0)}#t=y(null);get lastMessageTime(){return o(this.#t)}set lastMessageTime(e){_(this.#t,e,!0)}constructor(e){this.labState=e}generateClientId(){return"client_"+Math.random().toString(36).substr(2,9)}getBackendHttpBase(){const e=gn?.VITE_BACKEND_URL;if(e)return e.replace(/\/$/,"");const{protocol:s,hostname:r,port:n}=window.location;return n==="5173"||n==="4173"?"http://localhost:8000":`${s}//${r}${n?`:${n}`:""}`}getWebSocketUrl(){const e=this.getBackendHttpBase(),s=new URL(e);return`${s.protocol==="https:"?"wss:":"ws:"}//${s.host}/ws/${this.clientId}`}connect(){this.clientId||(this.clientId=this.generateClientId());const e=this.getWebSocketUrl();this.ws=new WebSocket(e),this.ws.onopen=()=>{console.log("Connected to WebSocket"),this.connectionStatus="connected",this.labState.isConnected=!0,this.reconnectAttempts=0},this.ws.onmessage=s=>{const r=JSON.parse(s.data);if(this.lastMessageTime=new Date,r.type==="initial_state")this.handleInitialState(r.data),console.log("Received initial state:",r.data);else if(r.type==="patch")try{this.labState.applyJsonPatch(r.patch)}catch(n){console.error("Error applying patch:",n),this.labState.addAlert("Failed to apply state update","error")}},this.ws.onclose=()=>{console.log("WebSocket disconnected"),this.connectionStatus="disconnected",this.labState.isConnected=!1,this.reconnectAttempts<this.maxReconnectAttempts?(this.reconnectAttempts++,console.log(`Reconnecting... (${this.reconnectAttempts}/${this.maxReconnectAttempts})`),setTimeout(()=>{this.connect()},2e3*this.reconnectAttempts)):this.labState.addAlert("Connection lost - max reconnect attempts reached","error")},this.ws.onerror=s=>{console.error("WebSocket error:",s),this.connectionStatus="error",this.labState.addAlert("WebSocket connection error","error")}}handleInitialState(e){if(console.log("handleInitialState called with:",e),this.labState.sensors.clear(),this.labState.equipment.clear(),this.labState.alerts.splice(0),e.version&&(this.labState.version=e.version),e.sensors){console.log("Initializing sensors from initial state:",e.sensors);for(const[s,r]of Object.entries(e.sensors))console.log("Creating sensor:",s,r),this.labState.sensors.updateItem(s,r);console.log("Sensors after initial state:",this.labState.sensors.size)}else console.log("No sensors in initial state");if(e.equipment)for(const[s,r]of Object.entries(e.equipment))this.labState.equipment.updateItem(s,r);if(e.alerts&&Array.isArray(e.alerts))for(const s of e.alerts)this.labState.addAlert(s.message,s.severity||"info")}sendCommand(e,s={}){return this.ws&&this.ws.readyState===WebSocket.OPEN?(this.ws.send(JSON.stringify({type:"command",command:e,params:s})),!0):(this.labState.addAlert("Cannot send command - not connected","warning"),!1)}disconnect(){this.ws&&this.ws.close(),this.connectionStatus="disconnected",this.labState.isConnected=!1}reconnect(){this.disconnect(),this.reconnectAttempts=0,setTimeout(()=>this.connect(),100)}get isConnected(){return this.connectionStatus==="connected"}get canSendCommands(){return this.isConnected&&this.ws?.readyState===WebSocket.OPEN}}class wn{pump;wsManager;#e=y(!1);get isCommandPending(){return o(this.#e)}set isCommandPending(e){_(this.#e,e,!0)}#t=y(null);get lastCommandResult(){return o(this.#t)}set lastCommandResult(e){_(this.#t,e,!0)}#s=y(0);get speedInputValue(){return o(this.#s)}set speedInputValue(e){_(this.#s,e,!0)}constructor(e,s){this.pump=e,this.wsManager=s,this.speedInputValue=e.speed,Et(()=>{this.speedInputValue=this.pump.speed})}async toggle(){if(!this.isCommandPending){this.isCommandPending=!0,this.lastCommandResult=null;try{this.wsManager.sendCommand("toggle_pump",{pumpId:this.pump.id})?(this.lastCommandResult=`Pump ${this.pump.isRunning?"stop":"start"} command sent`,this.pump.toggle()):this.lastCommandResult="Failed to send command"}catch(e){this.lastCommandResult=`Error: ${e}`}finally{this.isCommandPending=!1,setTimeout(()=>{this.lastCommandResult=null},3e3)}}}async setSpeed(e){if(!this.isCommandPending){this.isCommandPending=!0,this.lastCommandResult=null;try{const s=this.pump.setSpeed(e);this.wsManager.sendCommand("set_pump_speed",{pumpId:this.pump.id,speed:s})?this.lastCommandResult=`Speed set to ${s} RPM`:(this.lastCommandResult="Failed to send speed command",this.pump.setSpeed(this.speedInputValue))}catch(s){this.lastCommandResult=`Error: ${s}`}finally{this.isCommandPending=!1,setTimeout(()=>{this.lastCommandResult=null},3e3)}}}onSpeedInputChange(e){const s=e.target,r=parseInt(s.value);isNaN(r)||this.setSpeed(r)}get toggleButtonText(){return this.isCommandPending?"Processing...":this.pump.isRunning?"Stop Pump":"Start Pump"}get speedDisplayText(){return`${this.pump.speed} RPM (${this.pump.speedPercentage.toFixed(1)}%)`}get canOperate(){return this.wsManager.canSendCommands&&!this.isCommandPending}get statusColor(){return this.pump.status==="running"?"green":this.pump.status==="error"?"red":"gray"}}var Sn=T('<span class="last-update svelte-zrm9kr"> </span>'),bn=(t,e)=>e.reconnect(),kn=T('<button class="svelte-zrm9kr">Reconnect</button>'),xn=(t,e)=>e().reset(),Cn=T('<button class="reset-btn svelte-zrm9kr">Reset</button>'),En=T('<div class="sensor-card svelte-zrm9kr"><h3 class="svelte-zrm9kr"> </h3> <div class="sensor-value svelte-zrm9kr"> </div> <div> </div> <div class="sensor-time svelte-zrm9kr"> </div> <div class="sensor-actions svelte-zrm9kr"><!></div></div>'),An=T('<div class="equipment-prop svelte-zrm9kr"><strong class="svelte-zrm9kr"> </strong> </div>'),Pn=(t,e)=>o(e).toggle(),zn=(t,e)=>o(e).onSpeedInputChange(t),Tn=T('<div class="command-result svelte-zrm9kr"> </div>'),In=T('<div class="controls svelte-zrm9kr"><button class="toggle-btn svelte-zrm9kr"> </button> <label class="speed-control svelte-zrm9kr">Speed: <input type="range" class="svelte-zrm9kr"/> <span class="speed-display svelte-zrm9kr"> </span></label> <!></div>'),On=T('<div class="command-entry svelte-zrm9kr"><code class="svelte-zrm9kr"> </code> <span class="command-time svelte-zrm9kr"> </span></div>'),Rn=T('<details class="command-history svelte-zrm9kr"><summary class="svelte-zrm9kr"> </summary> <!></details>'),Nn=T('<div class="equipment-card svelte-zrm9kr"><h3 class="svelte-zrm9kr"> </h3> <div class="equipment-status svelte-zrm9kr">Status: <span> </span></div> <!> <!> <!></div>'),$n=T('<span class="critical-count svelte-zrm9kr"> </span>'),Mn=(t,e,s)=>e.clearAlert(o(s).id),qn=T('<div><div class="alert-header svelte-zrm9kr"><span class="alert-message svelte-zrm9kr"> </span> <button class="alert-close svelte-zrm9kr">×</button></div> <div class="alert-time svelte-zrm9kr"> </div></div>'),Dn=T('<div class="no-alerts svelte-zrm9kr">No alerts</div>'),Un=T('<div class="dashboard svelte-zrm9kr"><section class="sensors svelte-zrm9kr"><h2 class="svelte-zrm9kr"> </h2> <!></section> <section class="equipment svelte-zrm9kr"><h2 class="svelte-zrm9kr"> </h2> <!></section> <section class="alerts svelte-zrm9kr"><h2 class="svelte-zrm9kr"> <!></h2> <!> <!></section> <section class="system-info svelte-zrm9kr"><h2 class="svelte-zrm9kr">System Info</h2> <div class="info-grid svelte-zrm9kr"><div class="info-item svelte-zrm9kr"><strong class="svelte-zrm9kr">Version:</strong> </div> <div class="info-item svelte-zrm9kr"><strong class="svelte-zrm9kr">Connected:</strong> </div> <div class="info-item svelte-zrm9kr"><strong class="svelte-zrm9kr">Active Sensors:</strong> </div> <div class="info-item svelte-zrm9kr"><strong class="svelte-zrm9kr">Running Equipment:</strong> </div> <div class="info-item svelte-zrm9kr"><strong class="svelte-zrm9kr">Last Update:</strong> </div></div> <details class="debug-section svelte-zrm9kr"><summary class="svelte-zrm9kr">Debug Info</summary> <pre class="svelte-zrm9kr"> </pre></details></section></div>'),Fn=(t,e)=>e.reconnect(),Ln=T('<button class="retry-btn svelte-zrm9kr">Retry Connection</button>'),Hn=T('<div class="loading svelte-zrm9kr"><div class="loading-spinner svelte-zrm9kr"></div> <div class="svelte-zrm9kr">Loading lab state...</div> <!></div>'),Vn=T('<main class="svelte-zrm9kr"><div class="header svelte-zrm9kr"><h1 class="svelte-zrm9kr">Lab Control Dashboard</h1> <div class="status svelte-zrm9kr"><span></span> <!> <!></div></div> <!></main>');function jn(t,e){os(e,!0);const s=new _n,r=new yn(s);let n=new It;fn(()=>(r.connect(),()=>{r.disconnect()})),Et(()=>{n.clear();for(const[x,P]of s.equipment)if(P.type==="pump"){const te=s.getPump(x);te&&n.set(x,new wn(te,r))}});function i(x){return n.get(x)}const f=Y(()=>Array.from(s.sensors.entries())),d=Y(()=>Array.from(s.equipment.entries())),a=Y(()=>[...s.alerts].sort((x,P)=>new Date(P.timestamp).getTime()-new Date(x.timestamp).getTime())),u=Y(()=>s.sensors.size),c=Y(()=>s.equipment.size),v=Y(()=>o(u)>0||o(c)>0),l=Y(()=>r.lastMessageTime?.toLocaleTimeString()??"Never");var p=Vn(),g=h(p),I=m(h(g),2),M=h(I),b=m(M),E=m(b);{var rt=x=>{var P=Sn(),te=h(P);F(()=>S(te,`Last update: ${o(l)??""}`)),A(x,P)};K(E,x=>{r.lastMessageTime&&x(rt)})}var ye=m(E,2);{var G=x=>{var P=kn();P.__click=[bn,r],A(x,P)};K(ye,x=>{r.connectionStatus!=="connected"&&x(G)})}var Le=m(g,2);{var Ee=x=>{var P=Un(),te=h(P),He=h(te),Pe=h(He),Ve=m(He,2);$e(Ve,17,()=>o(f),Ne,(R,O)=>{var j=Y(()=>ct(o(O),2));let ve=()=>o(j)[0],z=()=>o(j)[1];var pe=En(),he=h(pe),ze=h(he),me=m(he,2),we=h(me),Te=m(me,2),je=h(Te),Ie=m(Te,2),nt=h(Ie),it=m(Ie,2),at=h(it);{var B=W=>{var C=Cn();C.__click=[xn,z],A(W,C)};K(at,W=>{z().isHealthy||W(B)})}F(()=>{S(ze,ve()),S(we,z().formattedValue),Ye(Te,1,`sensor-status status-${z().status??""}`,"svelte-zrm9kr"),S(je,z().status),S(nt,`Updated: ${z().timeSinceUpdate??""}`)}),A(R,pe)});var Rt=m(te,2),Nt=h(Rt),Ms=h(Nt),qs=m(Nt,2);$e(qs,17,()=>o(d),Ne,(R,O)=>{var j=Y(()=>ct(o(O),2));let ve=()=>o(j)[0],z=()=>o(j)[1];var pe=Nn(),he=h(pe),ze=h(he),me=m(he,2),we=m(h(me)),Te=h(we),je=m(me,2);$e(je,17,()=>Object.entries(z().properties),Ne,(B,W)=>{var C=Y(()=>ct(o(W),2));let Oe=()=>o(C)[0],Re=()=>o(C)[1];var ie=An(),ae=h(ie),X=h(ae),Se=m(ae);F(()=>{S(X,`${Oe()??""}:`),S(Se,` ${Re()??""}`)}),A(B,ie)});var Ie=m(je,2);{var nt=B=>{var W=Jr();const C=Y(()=>i(ve()));var Oe=Pr(W);{var Re=ie=>{var ae=In(),X=h(ae);X.__click=[Pn,C];var Se=h(X),Be=m(X,2),oe=m(h(Be));oe.__change=[zn,C];var ot=m(oe,2),lt=h(ot),Zs=m(Be,2);{var Qs=ut=>{var jt=Tn(),er=h(jt);F(()=>S(er,o(C).lastCommandResult)),A(ut,jt)};K(Zs,ut=>{o(C).lastCommandResult&&ut(Qs)})}F(()=>{X.disabled=!o(C).canOperate,an(X,`background-color: ${o(C).statusColor??""}`),S(Se,o(C).toggleButtonText),Zt(oe,"min",o(C).pump.minSpeed),Zt(oe,"max",o(C).pump.maxSpeed),un(oe,o(C).speedInputValue),oe.disabled=!o(C).canOperate,S(lt,o(C).speedDisplayText)}),A(ie,ae)};K(Oe,ie=>{o(C)&&ie(Re)})}A(B,W)};K(Ie,B=>{z().type==="pump"&&B(nt)})}var it=m(Ie,2);{var at=B=>{var W=Rn(),C=h(W),Oe=h(C),Re=m(C,2);$e(Re,17,()=>z().commandHistory.slice(-5),Ne,(ie,ae)=>{var X=On(),Se=h(X),Be=h(Se),oe=m(Se,2),ot=h(oe);F(lt=>{S(Be,o(ae).command),S(ot,lt)},[()=>o(ae).timestamp.toLocaleTimeString()]),A(ie,X)}),F(()=>S(Oe,`Recent Commands (${z().commandHistory.length??""})`)),A(B,W)};K(it,B=>{z().commandHistory.length>0&&B(at)})}F(()=>{S(ze,ve()),Ye(we,1,`status-${z().status??""}`,"svelte-zrm9kr"),S(Te,z().status)}),A(R,pe)});var $t=m(Rt,2),Mt=h($t),qt=h(Mt),Ds=m(qt);{var Us=R=>{var O=$n(),j=h(O);F(()=>S(j,`(${s.criticalAlerts.length??""} critical)`)),A(R,O)};K(Ds,R=>{s.criticalAlerts.length>0&&R(Us)})}var Dt=m(Mt,2);$e(Dt,17,()=>o(a),Ne,(R,O)=>{var j=qn(),ve=h(j),z=h(ve),pe=h(z),he=m(z,2);he.__click=[Mn,s,O];var ze=m(ve,2),me=h(ze);F(we=>{Ye(j,1,`alert alert-${o(O).severity??""}`,"svelte-zrm9kr"),S(pe,o(O).message),S(me,`${o(O).timeAgo??""} • ${we??""}`)},[()=>new Date(o(O).timestamp).toLocaleTimeString()]),A(R,j)});var Fs=m(Dt,2);{var Ls=R=>{var O=Dn();A(R,O)};K(Fs,R=>{s.alerts.length===0&&R(Ls)})}var Hs=m($t,2),Ut=m(h(Hs),2),Ft=h(Ut),Vs=m(h(Ft)),Lt=m(Ft,2),js=m(h(Lt)),Ht=m(Lt,2),Bs=m(h(Ht)),Vt=m(Ht,2),Ws=m(h(Vt)),Ys=m(Vt,2),Ks=m(h(Ys)),Js=m(Ut,2),Gs=m(h(Js),2),Xs=h(Gs);F((R,O)=>{S(Pe,`Sensors (${o(u)??""})`),S(Ms,`Equipment (${o(c)??""})`),S(qt,`Alerts (${s.alerts.length??""}) `),S(Vs,` ${s.version||"Unknown"}`),S(js,` ${s.isConnected?"Yes":"No"}`),S(Bs,` ${s.activeSensors.length??""}`),S(Ws,` ${s.runningEquipment.length??""}`),S(Ks,` ${R??""}`),S(Xs,O)},[()=>s.lastUpdate.toLocaleTimeString(),()=>JSON.stringify(s.toObject(),null,2)]),A(x,P)},Ae=x=>{var P=Hn(),te=m(h(P),4);{var He=Pe=>{var Ve=Ln();Ve.__click=[Fn,r],A(Pe,Ve)};K(te,Pe=>{r.connectionStatus==="error"&&Pe(He)})}A(x,P)};K(Le,x=>{o(v)?x(Ee):x(Ae,!1)})}F(()=>{Ye(M,1,`status-indicator ${r.connectionStatus??""}`,"svelte-zrm9kr"),S(b,` Status: ${r.connectionStatus??""} `)}),A(t,p),ls()}Yr(["click","change"]);Gr(jn,{target:document.getElementById("app")});
